# å®¤å†…ç¯å…·æ£€æµ‹æ£€æµ‹ç³»ç»Ÿæºç åˆ†äº«
 # [ä¸€æ¡é¾™æ•™å­¦YOLOV8æ ‡æ³¨å¥½çš„æ•°æ®é›†ä¸€é”®è®­ç»ƒ_70+å…¨å¥—æ”¹è¿›åˆ›æ–°ç‚¹å‘åˆŠ_Webå‰ç«¯å±•ç¤º]

### 1.ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

é¡¹ç›®å‚è€ƒ[AAAI Association for the Advancement of Artificial Intelligence](https://gitee.com/qunshansj/projects)

é¡¹ç›®æ¥æº[AACV Association for the Advancement of Computer Vision](https://gitee.com/qunmasj/projects)

ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

éšç€æ™ºèƒ½å®¶å±…å’Œç‰©è”ç½‘æŠ€æœ¯çš„è¿…é€Ÿå‘å±•ï¼Œå®¤å†…ç¯å¢ƒçš„æ™ºèƒ½åŒ–ç®¡ç†é€æ¸æˆä¸ºç ”ç©¶çš„çƒ­ç‚¹ä¹‹ä¸€ã€‚åœ¨è¿™ä¸€èƒŒæ™¯ä¸‹ï¼Œå®¤å†…ç¯å…·çš„æ™ºèƒ½æ£€æµ‹ä¸è¯†åˆ«æŠ€æœ¯æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚ç¯å…·ä¸ä»…æ˜¯å®¤å†…ç…§æ˜çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œæ›´æ˜¯å®¶å±…ç¾å­¦çš„é‡è¦ä½“ç°ã€‚å‡†ç¡®ã€é«˜æ•ˆåœ°è¯†åˆ«å’Œåˆ†ç±»å„ç§ç¯å…·ï¼Œä¸ä»…å¯ä»¥æå‡æ™ºèƒ½å®¶å±…ç³»ç»Ÿçš„ç”¨æˆ·ä½“éªŒï¼Œè¿˜èƒ½ä¸ºå®¤å†…ç¯å¢ƒçš„ä¼˜åŒ–æä¾›æ•°æ®æ”¯æŒã€‚å› æ­¤ï¼Œå¼€å‘åŸºäºå…ˆè¿›æ·±åº¦å­¦ä¹ æŠ€æœ¯çš„å®¤å†…ç¯å…·æ£€æµ‹ç³»ç»Ÿå…·æœ‰é‡è¦çš„ç†è®ºä»·å€¼å’Œå®é™…æ„ä¹‰ã€‚

è¿‘å¹´æ¥ï¼ŒYOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—ç›®æ ‡æ£€æµ‹ç®—æ³•å› å…¶é«˜æ•ˆæ€§å’Œå®æ—¶æ€§å—åˆ°å¹¿æ³›å…³æ³¨ã€‚YOLOv8ä½œä¸ºè¯¥ç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè¿›ä¸€æ­¥æå‡äº†æ£€æµ‹ç²¾åº¦å’Œé€Ÿåº¦ï¼Œé€‚ç”¨äºå¤æ‚çš„å®¤å†…ç¯å¢ƒã€‚ç„¶è€Œï¼Œä¼ ç»ŸYOLOv8åœ¨ç‰¹å®šåœºæ™¯ä¸‹çš„åº”ç”¨ä»ç„¶å­˜åœ¨ä¸€å®šçš„å±€é™æ€§ï¼Œå°¤å…¶æ˜¯åœ¨ç¯å…·ç§ç±»ç¹å¤šã€å½¢æ€å„å¼‚çš„æƒ…å†µä¸‹ã€‚å› æ­¤ï¼Œé’ˆå¯¹å®¤å†…ç¯å…·çš„ç‰¹å¾è¿›è¡Œæ”¹è¿›å’Œä¼˜åŒ–ï¼Œæ˜¯æå‡æ£€æµ‹ç³»ç»Ÿæ€§èƒ½çš„å…³é”®æ‰€åœ¨ã€‚

æœ¬ç ”ç©¶åŸºäºæ”¹è¿›YOLOv8ç®—æ³•ï¼Œæ„å»ºä¸€ä¸ªä¸“é—¨é’ˆå¯¹å®¤å†…ç¯å…·çš„æ£€æµ‹ç³»ç»Ÿã€‚æ‰€ä½¿ç”¨çš„æ•°æ®é›†â€œgelbertconlampara2â€åŒ…å«2300å¼ é«˜è´¨é‡å›¾åƒï¼Œæ¶µç›–äº†äº”ç±»ç¯å…·ï¼šæå½¢åŠç¯ã€å¤©èŠ±æ¿ç¯ã€åŠç¯ã€å£ç¯å’Œæ¶å­ç¯ã€‚è¿™äº›ç±»åˆ«çš„å¤šæ ·æ€§ä¸ºæ¨¡å‹çš„è®­ç»ƒæä¾›äº†ä¸°å¯Œçš„æ ·æœ¬ï¼Œæœ‰åŠ©äºæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å’Œè¯†åˆ«å‡†ç¡®ç‡ã€‚æ­¤å¤–ï¼Œæ•°æ®é›†ä¸­æ¯ç±»ç¯å…·çš„å›¾åƒæ•°é‡ç›¸å¯¹å‡è¡¡ï¼Œèƒ½å¤Ÿæœ‰æ•ˆé¿å…å› æ ·æœ¬ä¸å‡è¡¡å¯¼è‡´çš„æ¨¡å‹åå·®é—®é¢˜ã€‚

åœ¨ç ”ç©¶è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡æ•°æ®å¢å¼ºã€ç‰¹å¾æå–å’Œæ¨¡å‹ä¼˜åŒ–ç­‰æ‰‹æ®µï¼Œæå‡YOLOv8åœ¨å®¤å†…ç¯å…·æ£€æµ‹ä¸­çš„è¡¨ç°ã€‚é€šè¿‡å¯¹ä¸åŒç¯å…·çš„å½¢çŠ¶ã€é¢œè‰²ã€å…‰å½±ç­‰ç‰¹å¾è¿›è¡Œæ·±å…¥åˆ†æï¼Œæ”¹è¿›æ¨¡å‹çš„ç‰¹å¾æå–èƒ½åŠ›ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨å¤æ‚çš„å®¤å†…ç¯å¢ƒä¸­å®ç°é«˜æ•ˆã€å‡†ç¡®çš„ç¯å…·è¯†åˆ«ã€‚è¿™ä¸ä»…èƒ½å¤Ÿä¸ºæ™ºèƒ½å®¶å±…ç³»ç»Ÿæä¾›æ›´ä¸ºç²¾å‡†çš„ç¯å…·ç®¡ç†æ–¹æ¡ˆï¼Œè¿˜èƒ½ä¸ºåç»­çš„å®¤å†…ç¯å¢ƒæ™ºèƒ½åŒ–ç ”ç©¶å¥ å®šåŸºç¡€ã€‚

æ­¤å¤–ï¼Œæœ¬ç ”ç©¶çš„æˆæœå°†ä¸ºç›¸å…³é¢†åŸŸçš„ç ”ç©¶è€…æä¾›æœ‰ä»·å€¼çš„å‚è€ƒï¼Œæ¨åŠ¨ç›®æ ‡æ£€æµ‹æŠ€æœ¯åœ¨å®¤å†…ç¯å¢ƒä¸­çš„åº”ç”¨å‘å±•ã€‚éšç€æ•°æ®é›†çš„ä¸æ–­ä¸°å¯Œå’Œç®—æ³•çš„æŒç»­ä¼˜åŒ–ï¼Œå®¤å†…ç¯å…·æ£€æµ‹ç³»ç»Ÿæœ‰æœ›åœ¨æœªæ¥å®ç°æ›´å¹¿æ³›çš„åº”ç”¨ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæ™ºèƒ½å®¶å±…ã€å®¤å†…è®¾è®¡ã€ç¯å¢ƒç›‘æµ‹ç­‰é¢†åŸŸã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒåŸºäºæ”¹è¿›YOLOv8çš„å®¤å†…ç¯å…·æ£€æµ‹ç³»ç»Ÿçš„ç ”ç©¶ï¼Œä¸ä»…å…·æœ‰é‡è¦çš„å­¦æœ¯ä»·å€¼ï¼Œä¹Ÿä¸ºå®é™…åº”ç”¨æä¾›äº†åˆ‡å®å¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡å¯¹ç¯å…·çš„æ™ºèƒ½è¯†åˆ«ä¸ç®¡ç†ï¼Œæˆ‘ä»¬å°†æ¨åŠ¨æ™ºèƒ½å®¶å±…çš„å‘å±•ï¼Œæå‡äººä»¬çš„ç”Ÿæ´»è´¨é‡ï¼Œä¸ºå®ç°æ›´ä¸ºæ™ºèƒ½åŒ–çš„å±…ä½ç¯å¢ƒè´¡çŒ®åŠ›é‡ã€‚

### 2.å›¾ç‰‡æ¼”ç¤º

![1.png](1.png)

![2.png](2.png)

![3.png](3.png)

##### æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ2.å›¾ç‰‡æ¼”ç¤ºâ€å’Œâ€œ3.è§†é¢‘æ¼”ç¤ºâ€å±•ç¤ºçš„ç³»ç»Ÿå›¾ç‰‡æˆ–è€…è§†é¢‘å¯èƒ½ä¸ºè€ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬åœ¨è€ç‰ˆæœ¬çš„åŸºç¡€ä¸Šå‡çº§å¦‚ä¸‹ï¼šï¼ˆå®é™…æ•ˆæœä»¥å‡çº§çš„æ–°ç‰ˆæœ¬ä¸ºå‡†ï¼‰

  ï¼ˆ1ï¼‰é€‚é…äº†YOLOV8çš„â€œç›®æ ‡æ£€æµ‹â€æ¨¡å‹å’Œâ€œå®ä¾‹åˆ†å‰²â€æ¨¡å‹ï¼Œé€šè¿‡åŠ è½½ç›¸åº”çš„æƒé‡ï¼ˆ.ptï¼‰æ–‡ä»¶å³å¯è‡ªé€‚åº”åŠ è½½æ¨¡å‹ã€‚

  ï¼ˆ2ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«æ¨¡å¼ã€‚

  ï¼ˆ3ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«ç»“æœä¿å­˜å¯¼å‡ºï¼Œè§£å†³æ‰‹åŠ¨å¯¼å‡ºï¼ˆå®¹æ˜“å¡é¡¿å‡ºç°çˆ†å†…å­˜ï¼‰å­˜åœ¨çš„é—®é¢˜ï¼Œè¯†åˆ«å®Œè‡ªåŠ¨ä¿å­˜ç»“æœå¹¶å¯¼å‡ºåˆ°tempDirä¸­ã€‚

  ï¼ˆ4ï¼‰æ”¯æŒWebå‰ç«¯ç³»ç»Ÿä¸­çš„æ ‡é¢˜ã€èƒŒæ™¯å›¾ç­‰è‡ªå®šä¹‰ä¿®æ”¹ï¼Œåé¢æä¾›ä¿®æ”¹æ•™ç¨‹ã€‚

  å¦å¤–æœ¬é¡¹ç›®æä¾›è®­ç»ƒçš„æ•°æ®é›†å’Œè®­ç»ƒæ•™ç¨‹,æš‚ä¸æä¾›æƒé‡æ–‡ä»¶ï¼ˆbest.ptï¼‰,éœ€è¦æ‚¨æŒ‰ç…§æ•™ç¨‹è¿›è¡Œè®­ç»ƒåå®ç°å›¾ç‰‡æ¼”ç¤ºå’ŒWebå‰ç«¯ç•Œé¢æ¼”ç¤ºçš„æ•ˆæœã€‚

### 3.è§†é¢‘æ¼”ç¤º

[3.1 è§†é¢‘æ¼”ç¤º](https://www.bilibili.com/video/BV1xvthetEy1/)

### 4.æ•°æ®é›†ä¿¡æ¯å±•ç¤º

##### 4.1 æœ¬é¡¹ç›®æ•°æ®é›†è¯¦ç»†æ•°æ®ï¼ˆç±»åˆ«æ•°ï¼†ç±»åˆ«åï¼‰

nc: 4
names: ['Branches', 'ceiling lamp', 'chandelier', 'sconce']


##### 4.2 æœ¬é¡¹ç›®æ•°æ®é›†ä¿¡æ¯ä»‹ç»

æ•°æ®é›†ä¿¡æ¯å±•ç¤º

åœ¨æœ¬ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†åä¸ºâ€œgelbertconlampara2â€çš„æ•°æ®é›†ï¼Œä»¥è®­ç»ƒå’Œæ”¹è¿›YOLOv8æ¨¡å‹ï¼Œæ—¨åœ¨æå‡å®¤å†…ç¯å…·çš„æ£€æµ‹ç²¾åº¦å’Œæ•ˆç‡ã€‚è¯¥æ•°æ®é›†ä¸“æ³¨äºå®¤å†…ç…§æ˜è®¾å¤‡çš„å¤šæ ·æ€§ï¼Œæ¶µç›–äº†å››ä¸ªä¸»è¦ç±»åˆ«ï¼Œåˆ†åˆ«æ˜¯â€œBranchesâ€ï¼ˆæå½¢ç¯ï¼‰ã€â€œceiling lampâ€ï¼ˆå¤©èŠ±æ¿ç¯ï¼‰ã€â€œchandelierâ€ï¼ˆåŠç¯ï¼‰å’Œâ€œsconceâ€ï¼ˆå£ç¯ï¼‰ã€‚è¿™äº›ç±»åˆ«ä¸ä»…ä»£è¡¨äº†ç°ä»£å®¤å†…è®¾è®¡ä¸­å¸¸è§çš„ç¯å…·ç±»å‹ï¼Œä¹Ÿåæ˜ äº†ä¸åŒç…§æ˜éœ€æ±‚å’Œè£…é¥°é£æ ¼çš„å¤šæ ·æ€§ã€‚

â€œgelbertconlampara2â€æ•°æ®é›†çš„æ„å»ºè¿‡ç¨‹å……åˆ†è€ƒè™‘äº†å®¤å†…ç¯å¢ƒçš„å¤æ‚æ€§å’Œç¯å…·çš„å¤šæ ·æ€§ã€‚æ¯ä¸ªç±»åˆ«çš„æ ·æœ¬å‡ç»è¿‡ç²¾å¿ƒæŒ‘é€‰ï¼Œç¡®ä¿æ¶µç›–ä¸åŒçš„è®¾è®¡é£æ ¼ã€æè´¨å’Œé¢œè‰²ï¼Œä½¿å¾—æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­èƒ½å¤Ÿå­¦ä¹ åˆ°æ›´ä¸ºä¸°å¯Œçš„ç‰¹å¾ã€‚è¿™ç§å¤šæ ·æ€§å¯¹äºæé«˜YOLOv8åœ¨å®é™…åº”ç”¨ä¸­çš„æ³›åŒ–èƒ½åŠ›è‡³å…³é‡è¦ï¼Œå°¤å…¶æ˜¯åœ¨é¢å¯¹ä¸åŒå…‰ç…§æ¡ä»¶å’ŒèƒŒæ™¯ç¯å¢ƒæ—¶ï¼Œæ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°è¯†åˆ«å’Œå®šä½å„ç§ç¯å…·ã€‚

æ•°æ®é›†ä¸­æ¯ä¸ªç±»åˆ«çš„æ ·æœ¬æ•°é‡å’Œè´¨é‡éƒ½ç»è¿‡ä¸¥æ ¼å®¡æ ¸ï¼Œä»¥ç¡®ä¿å…¶æ ‡æ³¨çš„å‡†ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚æ¯ä¸ªç¯å…·ç±»åˆ«çš„å›¾åƒå‡åŒ…å«å¤šç§æ‹æ‘„è§’åº¦å’Œç¯å¢ƒè®¾ç½®ï¼ŒåŠ›æ±‚æ¨¡æ‹ŸçœŸå®çš„å®¤å†…åœºæ™¯ã€‚è¿™ç§å¤šæ ·åŒ–çš„å›¾åƒæ•°æ®ä¸ä»…æå‡äº†æ¨¡å‹çš„è®­ç»ƒæ•ˆæœï¼Œä¹Ÿä¸ºåç»­çš„éªŒè¯å’Œæµ‹è¯•æä¾›äº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç¡®ä¿æ¨¡å‹åœ¨é¢å¯¹å®é™…åº”ç”¨åœºæ™¯æ—¶ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°è¯†åˆ«å‡ºä¸åŒç±»å‹çš„ç¯å…·ã€‚

åœ¨æ•°æ®é›†çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç‰¹åˆ«å…³æ³¨äº†å›¾åƒçš„åˆ†è¾¨ç‡å’Œæ¸…æ™°åº¦ï¼Œè¿™å¯¹äºç›®æ ‡æ£€æµ‹ä»»åŠ¡çš„æˆåŠŸè‡³å…³é‡è¦ã€‚é«˜è´¨é‡çš„å›¾åƒèƒ½å¤Ÿå¸®åŠ©YOLOv8æ¨¡å‹æ›´å¥½åœ°æå–ç‰¹å¾ï¼Œä»è€Œæé«˜æ£€æµ‹çš„å‡†ç¡®æ€§ã€‚æ­¤å¤–ï¼Œæ•°æ®é›†ä¸­çš„æ¯ä¸ªå›¾åƒéƒ½é…æœ‰è¯¦ç»†çš„æ ‡æ³¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç¯å…·çš„ç±»åˆ«ã€ä½ç½®å’Œè¾¹ç•Œæ¡†ï¼Œè¿™äº›ä¿¡æ¯ä¸ºæ¨¡å‹çš„è®­ç»ƒæä¾›äº†å¿…è¦çš„ç›‘ç£ä¿¡å·ã€‚

ä¸ºäº†è¿›ä¸€æ­¥å¢å¼ºæ¨¡å‹çš„é²æ£’æ€§ï¼Œæˆ‘ä»¬è¿˜è€ƒè™‘äº†æ•°æ®å¢å¼ºæŠ€æœ¯çš„åº”ç”¨ã€‚é€šè¿‡å¯¹â€œgelbertconlampara2â€æ•°æ®é›†ä¸­çš„å›¾åƒè¿›è¡Œæ—‹è½¬ã€ç¼©æ”¾ã€è£å‰ªå’Œé¢œè‰²è°ƒæ•´ç­‰å¤„ç†ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç”Ÿæˆæ›´å¤šçš„è®­ç»ƒæ ·æœ¬ã€‚è¿™ç§æ–¹æ³•ä¸ä»…ä¸°å¯Œäº†è®­ç»ƒæ•°æ®çš„å¤šæ ·æ€§ï¼Œè¿˜æœ‰æ•ˆåœ°å‡å°‘äº†æ¨¡å‹å¯¹ç‰¹å®šæ ·æœ¬çš„è¿‡æ‹Ÿåˆé£é™©ï¼Œä½¿å¾—æœ€ç»ˆçš„æ£€æµ‹ç³»ç»Ÿåœ¨ä¸åŒåœºæ™¯ä¸‹å‡èƒ½ä¿æŒè‰¯å¥½çš„æ€§èƒ½ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼Œâ€œgelbertconlampara2â€æ•°æ®é›†ä¸ºæœ¬ç ”ç©¶æä¾›äº†ä¸€ä¸ªåšå®çš„åŸºç¡€ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿåœ¨æ”¹è¿›YOLOv8çš„å®¤å†…ç¯å…·æ£€æµ‹ç³»ç»Ÿçš„è¿‡ç¨‹ä¸­ï¼Œå……åˆ†åˆ©ç”¨å…¶ä¸°å¯Œçš„ç±»åˆ«ä¿¡æ¯å’Œé«˜è´¨é‡çš„å›¾åƒæ•°æ®ã€‚é€šè¿‡å¯¹è¯¥æ•°æ®é›†çš„æ·±å…¥åˆ†æå’Œåº”ç”¨ï¼Œæˆ‘ä»¬æœŸå¾…èƒ½å¤Ÿæ˜¾è‘—æå‡å®¤å†…ç¯å…·çš„æ£€æµ‹èƒ½åŠ›ï¼Œä¸ºæ™ºèƒ½å®¶å±…å’Œå®¤å†…è®¾è®¡é¢†åŸŸçš„è¿›ä¸€æ­¥å‘å±•æä¾›æ”¯æŒã€‚

![4.png](4.png)

![5.png](5.png)

![6.png](6.png)

![7.png](7.png)

![8.png](8.png)

### 5.å…¨å¥—é¡¹ç›®ç¯å¢ƒéƒ¨ç½²è§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰

[5.1 ç¯å¢ƒéƒ¨ç½²æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404473917358506534?logTag=c807d0cbc21c0ef59de5)




[5.2 å®‰è£…Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºå’Œä¾èµ–åº“å®‰è£…è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404474678003106304?logTag=1f1041108cd1f708b01a)

### 6.æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰

[6.1 æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰](https://www.ixigua.com/7404477157818401292?logTag=d31a2dfd1983c9668658)

### 7.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰

[7.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰](https://www.ixigua.com/7404478314661806627?logTag=29066f8288e3f4eea3a4)

### 8.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£ï¼ˆéç§‘ç­ä¹Ÿå¯ä»¥è½»æ¾å†™åˆŠå‘åˆŠï¼ŒV10ç‰ˆæœ¬æ­£åœ¨ç§‘ç ”å¾…æ›´æ–°ï¼‰

ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæ¯ä¸ªåˆ›æ–°ç‚¹çš„å…·ä½“åŸç†è®²è§£å°±ä¸ä¸€ä¸€å±•å¼€ï¼Œå…·ä½“è§ä¸‹åˆ—ç½‘å€ä¸­çš„åˆ›æ–°ç‚¹å¯¹åº”å­é¡¹ç›®çš„æŠ€æœ¯åŸç†åšå®¢ç½‘å€ã€Blogã€‘ï¼š

![9.png](9.png)

[8.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£é“¾æ¥](https://gitee.com/qunmasj/good)

### 9.ç³»ç»ŸåŠŸèƒ½å±•ç¤ºï¼ˆæ£€æµ‹å¯¹è±¡ä¸ºä¸¾ä¾‹ï¼Œå®é™…å†…å®¹ä»¥æœ¬é¡¹ç›®æ•°æ®é›†ä¸ºå‡†ï¼‰

å›¾9.1.ç³»ç»Ÿæ”¯æŒæ£€æµ‹ç»“æœè¡¨æ ¼æ˜¾ç¤º

  å›¾9.2.ç³»ç»Ÿæ”¯æŒç½®ä¿¡åº¦å’ŒIOUé˜ˆå€¼æ‰‹åŠ¨è°ƒèŠ‚

  å›¾9.3.ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰åŠ è½½æƒé‡æ–‡ä»¶best.pt(éœ€è¦ä½ é€šè¿‡æ­¥éª¤5ä¸­è®­ç»ƒè·å¾—)

  å›¾9.4.ç³»ç»Ÿæ”¯æŒæ‘„åƒå¤´å®æ—¶è¯†åˆ«

  å›¾9.5.ç³»ç»Ÿæ”¯æŒå›¾ç‰‡è¯†åˆ«

  å›¾9.6.ç³»ç»Ÿæ”¯æŒè§†é¢‘è¯†åˆ«

  å›¾9.7.ç³»ç»Ÿæ”¯æŒè¯†åˆ«ç»“æœæ–‡ä»¶è‡ªåŠ¨ä¿å­˜

  å›¾9.8.ç³»ç»Ÿæ”¯æŒExcelå¯¼å‡ºæ£€æµ‹ç»“æœæ•°æ®

![10.png](10.png)

![11.png](11.png)

![12.png](12.png)

![13.png](13.png)

![14.png](14.png)

![15.png](15.png)

![16.png](16.png)

![17.png](17.png)

### 10.åŸå§‹YOLOV8ç®—æ³•åŸç†

åŸå§‹YOLOv8ç®—æ³•åŸç†

YOLOv8ç®—æ³•ä½œä¸ºç›®æ ‡æ£€æµ‹é¢†åŸŸçš„æœ€æ–°è¿›å±•ï¼Œå»ºç«‹åœ¨YOLOv5çš„åŸºç¡€ä¸Šï¼Œç»è¿‡äº†ä¸€ç³»åˆ—çš„ä¼˜åŒ–ä¸æ”¹è¿›ï¼Œæ—¨åœ¨æå‡ç›®æ ‡æ£€æµ‹çš„é€Ÿåº¦ä¸ç²¾åº¦ã€‚è¯¥ç®—æ³•çš„è®¾è®¡ç†å¿µå›´ç»•ç€è½»é‡åŒ–ã€å¿«é€Ÿæ€§å’Œé«˜æ•ˆæ€§å±•å¼€ï¼Œç‰¹åˆ«é€‚åˆåœ¨èµ„æºå—é™çš„ç¯å¢ƒä¸­åº”ç”¨ã€‚YOLOv8çš„ç½‘ç»œç»“æ„ä¸»è¦ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šBackboneï¼ˆä¸»å¹²ç½‘ç»œï¼‰ã€Neckï¼ˆç‰¹å¾èåˆå±‚ï¼‰å’ŒHeadï¼ˆæ£€æµ‹å¤´ï¼‰ï¼Œè¿™ä¸‰éƒ¨åˆ†ç›¸è¾…ç›¸æˆï¼Œå…±åŒæ„æˆäº†YOLOv8çš„æ ¸å¿ƒã€‚

åœ¨Backboneéƒ¨åˆ†ï¼ŒYOLOv8é‡‡ç”¨äº†C2Fæ¨¡å—æ›¿ä»£äº†YOLOv5ä¸­çš„C3æ¨¡å—ã€‚C2Fæ¨¡å—çš„è®¾è®¡çµæ„Ÿæ¥æºäºCSPNetï¼Œæ—¨åœ¨é€šè¿‡å¹¶è¡Œçš„æ¢¯åº¦æµåˆ†æ”¯æå–æ›´ä¸°å¯Œçš„ç‰¹å¾ä¿¡æ¯ã€‚è¿™ç§ç»“æ„ä¸ä»…æé«˜äº†ç‰¹å¾æå–çš„æ•ˆç‡ï¼Œè¿˜æœ‰æ•ˆå‡å°äº†ç½‘ç»œçš„å¤æ‚åº¦ã€‚å…·ä½“è€Œè¨€ï¼ŒC2Fæ¨¡å—é€šè¿‡3Ã—3çš„å·ç§¯æ“ä½œï¼Œç»“åˆæ·±åº¦å¯åˆ†ç¦»å·ç§¯çš„æ€æƒ³ï¼Œå¢å¼ºäº†æ¨¡å‹å¯¹ç‰¹å¾çš„å­¦ä¹ èƒ½åŠ›ã€‚æ­¤å¤–ï¼ŒYOLOv8è¿˜å¼•å…¥äº†å¿«é€Ÿç©ºé—´é‡‘å­—å¡”æ± åŒ–ï¼ˆSPPFï¼‰æ¨¡å—ï¼Œè¿›ä¸€æ­¥æå‡äº†å¯¹å¤šå°ºåº¦ç‰¹å¾çš„å¤„ç†èƒ½åŠ›ï¼Œä½¿å¾—æ¨¡å‹åœ¨é¢å¯¹ä¸åŒå¤§å°çš„ç›®æ ‡æ—¶ï¼Œèƒ½å¤Ÿä¿æŒè‰¯å¥½çš„æ£€æµ‹æ€§èƒ½ã€‚

Neckéƒ¨åˆ†åˆ™æ˜¯YOLOv8çš„å¦ä¸€å¤§äº®ç‚¹ã€‚è¯¥éƒ¨åˆ†é‡‡ç”¨äº†å¤šå°ºåº¦ç‰¹å¾èåˆæŠ€æœ¯ï¼Œç»“åˆäº†ç‰¹å¾é‡‘å­—å¡”ç½‘ç»œï¼ˆFPNï¼‰å’Œè·¯å¾„èšåˆç½‘ç»œï¼ˆPANï¼‰ï¼Œæœ‰æ•ˆåœ°å°†æ¥è‡ªBackboneä¸åŒé˜¶æ®µçš„ç‰¹å¾å›¾è¿›è¡Œèåˆã€‚è¿™ç§èåˆç­–ç•¥ä½¿å¾—YOLOv8èƒ½å¤Ÿæ›´å¥½åœ°æ•æ‰åˆ°ä¸åŒå°ºåº¦ç›®æ ‡çš„ä¿¡æ¯ï¼Œä»è€Œæå‡äº†ç›®æ ‡æ£€æµ‹çš„æ€§èƒ½å’Œé²æ£’æ€§ã€‚ä¸ºäº†è¿›ä¸€æ­¥æé«˜ç‰¹å¾èåˆçš„æ•ˆç‡ï¼ŒYOLOv8è¿˜å¼•å…¥äº†BiFPNç½‘ç»œï¼Œé€šè¿‡é«˜æ•ˆçš„åŒå‘è·¨å°ºåº¦è¿æ¥å’ŒåŠ æƒç‰¹å¾èåˆï¼Œæ˜¾è‘—æå‡äº†æ¨¡å‹å¯¹ä¸åŒå°ºåº¦ç‰¹å¾ä¿¡æ¯çš„æå–é€Ÿåº¦ã€‚

åœ¨Headéƒ¨åˆ†ï¼ŒYOLOv8å®ç°äº†ä»è€¦åˆå¤´ï¼ˆCoupled-Headï¼‰åˆ°è§£è€¦å¤´ï¼ˆDecoupled-Headï¼‰çš„è½¬å˜ã€‚ä¼ ç»Ÿçš„è€¦åˆå¤´ç»“æ„å°†ç›®æ ‡æ£€æµ‹å’Œåˆ†ç±»ä»»åŠ¡åˆå¹¶åœ¨åŒä¸€ä¸ªå·ç§¯å±‚ä¸­ï¼Œè€ŒYOLOv8åˆ™å°†è¿™ä¸¤ä¸ªä»»åŠ¡åˆ†å¼€å¤„ç†ï¼Œåˆ†åˆ«ä½¿ç”¨ä¸åŒçš„å·ç§¯è·¯å¾„è¿›è¡Œç‰¹å¾æå–ã€‚è¿™ç§è§£è€¦è®¾è®¡ä¸ä»…æé«˜äº†æ¨¡å‹çš„çµæ´»æ€§ï¼Œè¿˜ä½¿å¾—ç½‘ç»œåœ¨å¤„ç†å¤æ‚åœºæ™¯æ—¶èƒ½å¤Ÿæ›´å¿«åœ°èšç„¦äºç›®æ ‡çš„å…³é”®ç‰¹å¾ã€‚æ­¤å¤–ï¼ŒYOLOv8æŠ›å¼ƒäº†ä¼ ç»Ÿçš„åŸºäºé”šæ¡†ï¼ˆAnchor-Basedï¼‰çš„æ–¹æ³•ï¼Œè½¬è€Œé‡‡ç”¨æ— é”šæ¡†ï¼ˆAnchor-Freeï¼‰ç­–ç•¥ï¼Œå°†ç›®æ ‡æ£€æµ‹è½¬åŒ–ä¸ºå…³é”®ç‚¹æ£€æµ‹ã€‚è¿™ä¸€åˆ›æ–°ä½¿å¾—æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¸å†ä¾èµ–äºé¢„è®¾çš„é”šæ¡†ï¼Œä»è€Œæå‡äº†æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å’Œç®€æ´æ€§ã€‚

åœ¨è¾“å…¥å¤„ç†æ–¹é¢ï¼ŒYOLOv8é»˜è®¤é‡‡ç”¨640Ã—640çš„å›¾åƒå°ºå¯¸è¿›è¡Œè®­ç»ƒå’Œæ¨ç†ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé’ˆå¯¹ä¸åŒé•¿å®½æ¯”çš„å›¾åƒï¼ŒYOLOv8å®ç°äº†è‡ªé€‚åº”çš„å›¾åƒç¼©æ”¾ç­–ç•¥ã€‚è¿™ç§ç­–ç•¥é€šè¿‡å°†é•¿è¾¹æŒ‰æ¯”ä¾‹ç¼©å°åˆ°æŒ‡å®šå°ºå¯¸ï¼Œå¹¶å¯¹çŸ­è¾¹è¿›è¡Œå¡«å……ï¼Œæœ€å¤§é™åº¦åœ°å‡å°‘äº†ä¿¡æ¯å†—ä½™ï¼Œæé«˜äº†ç›®æ ‡æ£€æµ‹çš„é€Ÿåº¦å’Œå‡†ç¡®æ€§ã€‚æ­¤å¤–ï¼ŒYOLOv8è¿˜å¼•å…¥äº†Mosaicå›¾åƒå¢å¼ºæŠ€æœ¯ï¼Œé€šè¿‡éšæœºæ‹¼æ¥å¤šå¼ å›¾åƒï¼Œè¿«ä½¿æ¨¡å‹å­¦ä¹ åˆ°ä¸åŒä½ç½®å’Œå‘¨å›´åƒç´ çš„ç‰¹å¾ï¼Œä»è€Œè¿›ä¸€æ­¥æå‡äº†æ¨¡å‹çš„é¢„æµ‹ç²¾åº¦ã€‚

åœ¨æŸå¤±å‡½æ•°çš„è®¾è®¡ä¸Šï¼ŒYOLOv8ä¹Ÿè¿›è¡Œäº†åˆ›æ–°ã€‚ä¸ºäº†åº”å¯¹è®­ç»ƒå’Œæ¨ç†è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„é€»è¾‘ä¸ä¸€è‡´æ€§ï¼ŒYOLOv8å–æ¶ˆäº†Objåˆ†æ”¯ï¼Œé‡‡ç”¨äº†BCELossï¼ˆBinary Cross Entropy Lossï¼‰ç”¨äºåˆ†ç±»åˆ†æ”¯ï¼Œè€Œåœ¨è¾¹ç•Œæ¡†å›å½’åˆ†æ”¯ä¸­åˆ™ä½¿ç”¨äº†DFLï¼ˆDistribution Focal Lossï¼‰å’ŒCIoULossï¼ˆComplete Intersection over Union Lossï¼‰ã€‚è¿™ç§æŸå¤±å‡½æ•°çš„è®¾è®¡æ—¨åœ¨ä½¿ç½‘ç»œæ¨¡å‹æ›´å¿«åœ°èšç„¦äºæ ‡ç­¾é™„è¿‘çš„æ•°å€¼ï¼Œæé«˜ç›®æ ‡æ£€æµ‹çš„ç²¾åº¦ã€‚

æ€»çš„æ¥è¯´ï¼ŒYOLOv8ç®—æ³•é€šè¿‡ä¸€ç³»åˆ—çš„ç»“æ„ä¼˜åŒ–å’Œåˆ›æ–°ï¼Œæå¤§åœ°æå‡äº†ç›®æ ‡æ£€æµ‹çš„æ€§èƒ½å’Œçµæ´»æ€§ã€‚å…¶è½»é‡åŒ–çš„è®¾è®¡ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿåœ¨å¤šç§åº”ç”¨åœºæ™¯ä¸­é«˜æ•ˆè¿è¡Œï¼Œç‰¹åˆ«æ˜¯åœ¨å®æ—¶ç›®æ ‡æ£€æµ‹ã€å›¾åƒåˆ†å‰²å’Œå›¾åƒåˆ†ç±»ç­‰ä»»åŠ¡ä¸­å±•ç°å‡ºå“è¶Šçš„è¡¨ç°ã€‚éšç€YOLOv8çš„å¹¿æ³›åº”ç”¨ï¼Œç›®æ ‡æ£€æµ‹æŠ€æœ¯çš„ç ”ç©¶ä¸å®è·µå°†è¿æ¥æ–°çš„å‘å±•æœºé‡ã€‚

![18.png](18.png)

### 11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰

#### 11.1 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\nas\__init__.py

ä¸‹é¢æ˜¯å¯¹æä¾›ä»£ç çš„é€è¡Œåˆ†æå’Œæ ¸å¿ƒéƒ¨åˆ†çš„ä¿ç•™ï¼ŒåŒæ—¶æ·»åŠ äº†è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
# Ultralytics YOLO ğŸš€, AGPL-3.0 license

# ä»å½“å‰åŒ…ä¸­å¯¼å…¥ NAS æ¨¡å‹
from .model import NAS

# ä»å½“å‰åŒ…ä¸­å¯¼å…¥ NAS é¢„æµ‹å™¨
from .predict import NASPredictor

# ä»å½“å‰åŒ…ä¸­å¯¼å…¥ NAS éªŒè¯å™¨
from .val import NASValidator

# å®šä¹‰å½“å‰æ¨¡å—çš„å…¬å¼€æ¥å£ï¼Œå…è®¸å¤–éƒ¨è®¿é—® NASPredictorã€NASValidator å’Œ NAS
__all__ = 'NASPredictor', 'NASValidator', 'NAS'
```

### ä»£ç åˆ†æä¸æ³¨é‡Šï¼š

1. **å¯¼å…¥æ¨¡å—**ï¼š
   - `from .model import NAS`ï¼šä»å½“å‰åŒ…çš„ `model` æ¨¡å—ä¸­å¯¼å…¥ `NAS` ç±»æˆ–å‡½æ•°ï¼Œè¿™é€šå¸¸æ˜¯ä¸€ä¸ªç¥ç»ç½‘ç»œæ¨¡å‹çš„å®šä¹‰ã€‚
   - `from .predict import NASPredictor`ï¼šä»å½“å‰åŒ…çš„ `predict` æ¨¡å—ä¸­å¯¼å…¥ `NASPredictor` ç±»æˆ–å‡½æ•°ï¼Œè´Ÿè´£ä½¿ç”¨ `NAS` æ¨¡å‹è¿›è¡Œé¢„æµ‹ã€‚
   - `from .val import NASValidator`ï¼šä»å½“å‰åŒ…çš„ `val` æ¨¡å—ä¸­å¯¼å…¥ `NASValidator` ç±»æˆ–å‡½æ•°ï¼Œè´Ÿè´£éªŒè¯æ¨¡å‹çš„æ€§èƒ½ã€‚

2. **å®šä¹‰å…¬å¼€æ¥å£**ï¼š
   - `__all__ = 'NASPredictor', 'NASValidator', 'NAS'`ï¼šè¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œç”¨äºå®šä¹‰å½“å‰æ¨¡å—çš„å…¬å…±æ¥å£ã€‚åªæœ‰åœ¨ä½¿ç”¨ `from module import *` è¯­å¥æ—¶ï¼Œåˆ—å‡ºçš„åç§°æ‰ä¼šè¢«å¯¼å…¥ã€‚è¿™æœ‰åŠ©äºæ§åˆ¶æ¨¡å—çš„å‘½åç©ºé—´ï¼Œé¿å…ä¸å¿…è¦çš„åç§°æ³„éœ²ã€‚

### æ ¸å¿ƒéƒ¨åˆ†æ€»ç»“ï¼š
- è¯¥ä»£ç ä¸»è¦ç”¨äºç»„ç»‡å’Œå¯¼å…¥ä¸ NASï¼ˆç¥ç»æ¶æ„æœç´¢ï¼‰ç›¸å…³çš„æ¨¡å‹ã€é¢„æµ‹å’ŒéªŒè¯åŠŸèƒ½ã€‚é€šè¿‡å®šä¹‰ `__all__`ï¼Œå®ƒæ˜ç¡®äº†å“ªäº›éƒ¨åˆ†å¯ä»¥è¢«å¤–éƒ¨ä½¿ç”¨ï¼Œå¢å¼ºäº†æ¨¡å—çš„å°è£…æ€§ã€‚

è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªPythonæ¨¡å—çš„åˆå§‹åŒ–æ–‡ä»¶ï¼Œé€šå¸¸å‘½åä¸º`__init__.py`ï¼Œç”¨äºæ ‡è¯†ä¸€ä¸ªç›®å½•ä¸ºPythonåŒ…ã€‚åœ¨è¿™ä¸ªç‰¹å®šçš„æ–‡ä»¶ä¸­ï¼Œä¸»è¦æ¶‰åŠåˆ°Ultralytics YOLOï¼ˆYou Only Look Onceï¼‰ç®—æ³•çš„ä¸€ä¸ªæ”¹è¿›ç‰ˆæœ¬ï¼Œå…·ä½“æ˜¯ä¸ç¥ç»æ¶æ„æœç´¢ï¼ˆNASï¼ŒNeural Architecture Searchï¼‰ç›¸å…³çš„å†…å®¹ã€‚

æ–‡ä»¶çš„å¼€å¤´æœ‰ä¸€è¡Œæ³¨é‡Šï¼ŒæŒ‡å‡ºè¯¥é¡¹ç›®æ˜¯Ultralytics YOLOçš„å®ç°ï¼Œå¹¶ä¸”ä½¿ç”¨çš„æ˜¯AGPL-3.0è®¸å¯è¯ã€‚è¿™æ„å‘³ç€è¯¥ä»£ç æ˜¯å¼€æºçš„ï¼Œç”¨æˆ·å¯ä»¥è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹ï¼Œä½†éœ€è¦éµå¾ªè¯¥è®¸å¯è¯çš„æ¡æ¬¾ã€‚

æ¥ä¸‹æ¥ï¼Œæ–‡ä»¶é€šè¿‡`from`è¯­å¥å¯¼å…¥äº†ä¸‰ä¸ªç»„ä»¶ï¼š`NAS`ã€`NASPredictor`å’Œ`NASValidator`ã€‚è¿™äº›ç»„ä»¶åˆ†åˆ«æ¥è‡ªäºåŒä¸€åŒ…ä¸­çš„ä¸åŒæ¨¡å—ã€‚`NAS`å¯èƒ½æ˜¯ä¸€ä¸ªç±»æˆ–å‡½æ•°ï¼Œè´Ÿè´£å®ç°ç¥ç»æ¶æ„æœç´¢çš„æ ¸å¿ƒé€»è¾‘ï¼›`NASPredictor`åˆ™å¯èƒ½æ˜¯ä¸€ä¸ªç”¨äºè¿›è¡Œé¢„æµ‹çš„ç±»ï¼ŒåŸºäºNASæ¨¡å‹è¿›è¡Œæ¨ç†ï¼›è€Œ`NASValidator`åˆ™å¯èƒ½ç”¨äºéªŒè¯æ¨¡å‹çš„æ€§èƒ½æˆ–å‡†ç¡®æ€§ã€‚

æœ€åï¼Œ`__all__`å˜é‡å®šä¹‰äº†å½“ä½¿ç”¨`from module import *`è¯­å¥æ—¶ï¼Œå“ªäº›åç§°ä¼šè¢«å¯¼å…¥ã€‚åœ¨è¿™é‡Œï¼Œ`__all__`åŒ…å«äº†`NASPredictor`ã€`NASValidator`å’Œ`NAS`ï¼Œè¿™æ„å‘³ç€è¿™ä¸‰ä¸ªç»„ä»¶æ˜¯è¯¥æ¨¡å—çš„å…¬å…±æ¥å£ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒä»¬ã€‚

æ€»ä½“æ¥è¯´ï¼Œè¿™ä¸ª`__init__.py`æ–‡ä»¶çš„ä½œç”¨æ˜¯å°†ä¸NASç›¸å…³çš„åŠŸèƒ½æ¨¡å—æ•´åˆåˆ°ä¸€ä¸ªåŒ…ä¸­ï¼Œæ–¹ä¾¿ç”¨æˆ·å¯¼å…¥å’Œä½¿ç”¨ã€‚

#### 11.2 ui.py

```python
import sys
import subprocess

def run_script(script_path):
    """
    ä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

    Args:
        script_path (str): è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„

    Returns:
        None
    """
    # è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„
    python_path = sys.executable

    # æ„å»ºè¿è¡Œå‘½ä»¤
    command = f'"{python_path}" -m streamlit run "{script_path}"'

    # æ‰§è¡Œå‘½ä»¤
    result = subprocess.run(command, shell=True)
    if result.returncode != 0:
        print("è„šæœ¬è¿è¡Œå‡ºé”™ã€‚")


# å®ä¾‹åŒ–å¹¶è¿è¡Œåº”ç”¨
if __name__ == "__main__":
    # æŒ‡å®šæ‚¨çš„è„šæœ¬è·¯å¾„
    script_path = "web.py"  # è¿™é‡Œç›´æ¥æŒ‡å®šè„šæœ¬è·¯å¾„

    # è¿è¡Œè„šæœ¬
    run_script(script_path)  # è°ƒç”¨å‡½æ•°è¿è¡ŒæŒ‡å®šçš„è„šæœ¬
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†æ³¨é‡Šï¼š

1. **å¯¼å…¥æ¨¡å—**ï¼š
   - `import sys`: å¯¼å…¥ `sys` æ¨¡å—ï¼Œç”¨äºè®¿é—®ä¸ Python è§£é‡Šå™¨ç›¸å…³çš„å˜é‡å’Œå‡½æ•°ã€‚
   - `import subprocess`: å¯¼å…¥ `subprocess` æ¨¡å—ï¼Œç”¨äºæ‰§è¡Œå¤–éƒ¨å‘½ä»¤ã€‚

2. **å®šä¹‰ `run_script` å‡½æ•°**ï¼š
   - è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° `script_path`ï¼Œè¡¨ç¤ºè¦è¿è¡Œçš„ Python è„šæœ¬çš„è·¯å¾„ã€‚
   - ä½¿ç”¨ `sys.executable` è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œä»¥ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ Python ç¯å¢ƒæ¥è¿è¡Œè„šæœ¬ã€‚
   - æ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸² `command`ï¼Œè¯¥å‘½ä»¤å°†ä½¿ç”¨ `streamlit` æ¨¡å—è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚
   - ä½¿ç”¨ `subprocess.run` æ‰§è¡Œæ„å»ºçš„å‘½ä»¤ï¼Œå¹¶é€šè¿‡ `shell=True` å…è®¸åœ¨ shell ä¸­æ‰§è¡Œå‘½ä»¤ã€‚
   - æ£€æŸ¥å‘½ä»¤çš„è¿”å›ç ï¼Œå¦‚æœä¸ä¸º 0ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œå‡ºé”™ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯ã€‚

3. **ä¸»ç¨‹åºå…¥å£**ï¼š
   - `if __name__ == "__main__":` ç¡®ä¿åªæœ‰åœ¨ç›´æ¥è¿è¡Œè¯¥è„šæœ¬æ—¶æ‰ä¼šæ‰§è¡Œä»¥ä¸‹ä»£ç ã€‚
   - æŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ `script_path`ï¼Œè¿™é‡Œç›´æ¥æŒ‡å®šä¸º `"web.py"`ã€‚
   - è°ƒç”¨ `run_script` å‡½æ•°ï¼Œä¼ å…¥è„šæœ¬è·¯å¾„ä»¥è¿è¡Œè¯¥è„šæœ¬ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½æ˜¯ä½¿ç”¨å½“å‰çš„ Python ç¯å¢ƒæ¥è¿è¡Œä¸€ä¸ªæŒ‡å®šçš„è„šæœ¬ï¼Œå…·ä½“æ¥è¯´æ˜¯è¿è¡Œä¸€ä¸ªåä¸º `web.py` çš„è„šæœ¬ã€‚ç¨‹åºé¦–å…ˆå¯¼å…¥äº†å¿…è¦çš„æ¨¡å—ï¼ŒåŒ…æ‹¬ `sys`ã€`os` å’Œ `subprocess`ï¼Œä»¥åŠä¸€ä¸ªè‡ªå®šä¹‰çš„ `abs_path` å‡½æ•°ï¼Œç”¨äºè·å–æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚

åœ¨ `run_script` å‡½æ•°ä¸­ï¼Œé¦–å…ˆè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œè¿™é€šè¿‡ `sys.executable` å®ç°ã€‚æ¥ç€ï¼Œæ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œè¯¥å‘½ä»¤ä½¿ç”¨ `streamlit` æ¨¡å—æ¥è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚è¿™é‡Œçš„å‘½ä»¤æ ¼å¼ä¸º `"{python_path}" -m streamlit run "{script_path}"`ï¼Œå…¶ä¸­ `python_path` æ˜¯å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œ`script_path` æ˜¯è¦è¿è¡Œçš„è„šæœ¬çš„è·¯å¾„ã€‚

ç„¶åï¼Œä½¿ç”¨ `subprocess.run` æ–¹æ³•æ¥æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚`shell=True` å‚æ•°è¡¨ç¤ºåœ¨ä¸€ä¸ªæ–°çš„ shell ä¸­æ‰§è¡Œå‘½ä»¤ã€‚æ‰§è¡Œåï¼Œç¨‹åºä¼šæ£€æŸ¥è¿”å›çš„ç»“æœç ï¼Œå¦‚æœä¸ä¸ºé›¶ï¼Œè¯´æ˜è„šæœ¬è¿è¡Œå‡ºé”™ï¼Œç¨‹åºä¼šæ‰“å°å‡ºç›¸åº”çš„é”™è¯¯ä¿¡æ¯ã€‚

åœ¨æ–‡ä»¶çš„æœ€åéƒ¨åˆ†ï¼Œä½¿ç”¨ `if __name__ == "__main__":` æ¥ç¡®ä¿åªæœ‰åœ¨ç›´æ¥è¿è¡Œè¯¥æ–‡ä»¶æ—¶æ‰ä¼šæ‰§è¡Œåé¢çš„ä»£ç ã€‚åœ¨è¿™é‡Œï¼Œé¦–å…ˆè°ƒç”¨ `abs_path` å‡½æ•°è·å– `web.py` çš„ç»å¯¹è·¯å¾„ï¼Œç„¶åè°ƒç”¨ `run_script` å‡½æ•°æ¥è¿è¡Œè¿™ä¸ªè„šæœ¬ã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªç¨‹åºçš„ä½œç”¨æ˜¯ç®€åŒ–é€šè¿‡ Python ç¯å¢ƒè¿è¡Œ Streamlit åº”ç”¨çš„è¿‡ç¨‹ï¼Œæä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥å¯åŠ¨æŒ‡å®šçš„è„šæœ¬ã€‚

#### 11.3 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\tasks.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å¹¶é™„æœ‰è¯¦ç»†ä¸­æ–‡æ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import torch
import torch.nn as nn

class BaseModel(nn.Module):
    """BaseModelç±»æ˜¯Ultralytics YOLOç³»åˆ—æ¨¡å‹çš„åŸºç±»ã€‚"""

    def forward(self, x, *args, **kwargs):
        """
        æ¨¡å‹çš„å‰å‘ä¼ æ’­æ–¹æ³•ã€‚

        å‚æ•°:
            x (torch.Tensor | dict): è¾“å…¥å›¾åƒå¼ é‡æˆ–åŒ…å«å›¾åƒå¼ é‡å’ŒçœŸå®æ ‡ç­¾çš„å­—å…¸ã€‚

        è¿”å›:
            (torch.Tensor): ç½‘ç»œçš„è¾“å‡ºã€‚
        """
        if isinstance(x, dict):  # å¤„ç†è®­ç»ƒå’ŒéªŒè¯æ—¶çš„æƒ…å†µ
            return self.loss(x, *args, **kwargs)  # è®¡ç®—æŸå¤±
        return self.predict(x, *args, **kwargs)  # è¿›è¡Œé¢„æµ‹

    def predict(self, x, profile=False, visualize=False, augment=False):
        """
        é€šè¿‡ç½‘ç»œè¿›è¡Œå‰å‘ä¼ æ’­ã€‚

        å‚æ•°:
            x (torch.Tensor): è¾“å…¥å¼ é‡ã€‚
            profile (bool): å¦‚æœä¸ºTrueï¼Œåˆ™æ‰“å°æ¯å±‚çš„è®¡ç®—æ—¶é—´ï¼Œé»˜è®¤ä¸ºFalseã€‚
            visualize (bool): å¦‚æœä¸ºTrueï¼Œåˆ™ä¿å­˜æ¨¡å‹çš„ç‰¹å¾å›¾ï¼Œé»˜è®¤ä¸ºFalseã€‚
            augment (bool): åœ¨é¢„æµ‹æ—¶è¿›è¡Œå›¾åƒå¢å¼ºï¼Œé»˜è®¤ä¸ºFalseã€‚

        è¿”å›:
            (torch.Tensor): æ¨¡å‹çš„æœ€åè¾“å‡ºã€‚
        """
        if augment:
            return self._predict_augment(x)  # è¿›è¡Œå¢å¼ºé¢„æµ‹
        return self._predict_once(x, profile, visualize)  # è¿›è¡Œä¸€æ¬¡é¢„æµ‹

    def _predict_once(self, x, profile=False, visualize=False):
        """
        æ‰§è¡Œä¸€æ¬¡å‰å‘ä¼ æ’­ã€‚

        å‚æ•°:
            x (torch.Tensor): è¾“å…¥å¼ é‡ã€‚
            profile (bool): å¦‚æœä¸ºTrueï¼Œåˆ™æ‰“å°æ¯å±‚çš„è®¡ç®—æ—¶é—´ï¼Œé»˜è®¤ä¸ºFalseã€‚
            visualize (bool): å¦‚æœä¸ºTrueï¼Œåˆ™ä¿å­˜æ¨¡å‹çš„ç‰¹å¾å›¾ï¼Œé»˜è®¤ä¸ºFalseã€‚

        è¿”å›:
            (torch.Tensor): æ¨¡å‹çš„æœ€åè¾“å‡ºã€‚
        """
        y, dt = [], []  # è¾“å‡ºåˆ—è¡¨å’Œæ—¶é—´åˆ—è¡¨
        for m in self.model:  # éå†æ¨¡å‹ä¸­çš„æ¯ä¸€å±‚
            if m.f != -1:  # å¦‚æœä¸æ˜¯æ¥è‡ªå‰ä¸€å±‚
                x = y[m.f] if isinstance(m.f, int) else [x if j == -1 else y[j] for j in m.f]  # ä»æ—©æœŸå±‚è·å–è¾“å…¥
            if profile:
                self._profile_one_layer(m, x, dt)  # è®°å½•å±‚çš„è®¡ç®—æ—¶é—´
            x = m(x)  # æ‰§è¡Œå‰å‘ä¼ æ’­
            y.append(x if m.i in self.save else None)  # ä¿å­˜è¾“å‡º
            if visualize:
                feature_visualization(x, m.type, m.i, save_dir=visualize)  # å¯è§†åŒ–ç‰¹å¾å›¾
        return x  # è¿”å›æœ€åçš„è¾“å‡º

    def loss(self, batch, preds=None):
        """
        è®¡ç®—æŸå¤±ã€‚

        å‚æ•°:
            batch (dict): ç”¨äºè®¡ç®—æŸå¤±çš„æ‰¹æ¬¡æ•°æ®ã€‚
            preds (torch.Tensor | List[torch.Tensor]): é¢„æµ‹ç»“æœã€‚
        """
        if not hasattr(self, 'criterion'):
            self.criterion = self.init_criterion()  # åˆå§‹åŒ–æŸå¤±å‡½æ•°

        preds = self.forward(batch['img']) if preds is None else preds  # è·å–é¢„æµ‹ç»“æœ
        return self.criterion(preds, batch)  # è®¡ç®—æŸå¤±

    def init_criterion(self):
        """åˆå§‹åŒ–BaseModelçš„æŸå¤±æ ‡å‡†ã€‚"""
        raise NotImplementedError('compute_loss() needs to be implemented by task heads')


class DetectionModel(BaseModel):
    """YOLOv8æ£€æµ‹æ¨¡å‹ã€‚"""

    def __init__(self, cfg='yolov8n.yaml', ch=3, nc=None, verbose=True):
        """ä½¿ç”¨ç»™å®šçš„é…ç½®å’Œå‚æ•°åˆå§‹åŒ–YOLOv8æ£€æµ‹æ¨¡å‹ã€‚"""
        super().__init__()
        self.yaml = cfg if isinstance(cfg, dict) else yaml_model_load(cfg)  # åŠ è½½é…ç½®å­—å…¸

        # å®šä¹‰æ¨¡å‹
        ch = self.yaml['ch'] = self.yaml.get('ch', ch)  # è¾“å…¥é€šé“
        if nc and nc != self.yaml['nc']:
            self.yaml['nc'] = nc  # è¦†ç›–YAMLä¸­çš„ç±»åˆ«æ•°
        self.model, self.save = parse_model(deepcopy(self.yaml), ch=ch, verbose=verbose)  # è§£ææ¨¡å‹
        self.names = {i: f'{i}' for i in range(self.yaml['nc'])}  # é»˜è®¤åç§°å­—å…¸

        # åˆå§‹åŒ–æƒé‡å’Œåç½®
        initialize_weights(self)

    def init_criterion(self):
        """åˆå§‹åŒ–DetectionModelçš„æŸå¤±æ ‡å‡†ã€‚"""
        return v8DetectionLoss(self)  # è¿”å›YOLOv8æ£€æµ‹æŸå¤±
```

### ä»£ç è¯´æ˜ï¼š
1. **BaseModelç±»**ï¼šè¿™æ˜¯æ‰€æœ‰YOLOæ¨¡å‹çš„åŸºç±»ï¼Œå®šä¹‰äº†æ¨¡å‹çš„åŸºæœ¬ç»“æ„å’Œå‰å‘ä¼ æ’­æ–¹æ³•ã€‚
   - `forward`æ–¹æ³•å¤„ç†è¾“å…¥å¹¶å†³å®šæ˜¯è®¡ç®—æŸå¤±è¿˜æ˜¯è¿›è¡Œé¢„æµ‹ã€‚
   - `predict`æ–¹æ³•è´Ÿè´£æ‰§è¡Œå‰å‘ä¼ æ’­ï¼Œå¹¶å¯é€‰æ‹©è¿›è¡Œæ•°æ®å¢å¼ºå’Œå¯è§†åŒ–ã€‚
   - `loss`æ–¹æ³•è®¡ç®—æ¨¡å‹çš„æŸå¤±ï¼Œä½¿ç”¨æŒ‡å®šçš„æŸå¤±æ ‡å‡†ã€‚

2. **DetectionModelç±»**ï¼šç»§æ‰¿è‡ªBaseModelï¼Œä¸“é—¨ç”¨äºYOLOv8çš„æ£€æµ‹ä»»åŠ¡ã€‚
   - åœ¨åˆå§‹åŒ–æ—¶åŠ è½½æ¨¡å‹é…ç½®ï¼Œå¹¶è§£ææ¨¡å‹ç»“æ„ã€‚
   - `init_criterion`æ–¹æ³•è¿”å›ç‰¹å®šäºæ£€æµ‹ä»»åŠ¡çš„æŸå¤±æ ‡å‡†ã€‚

é€šè¿‡è¿™äº›æ ¸å¿ƒéƒ¨åˆ†çš„æ³¨é‡Šï¼Œå¯ä»¥æ›´å¥½åœ°ç†è§£YOLOæ¨¡å‹çš„ç»“æ„å’ŒåŠŸèƒ½ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯Ultralytics YOLOv8æ¨¡å‹çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œä¸»è¦å®ç°äº†æ¨¡å‹çš„å®šä¹‰ã€è®­ç»ƒå’Œæ¨ç†åŠŸèƒ½ã€‚æ–‡ä»¶ä¸­åŒ…å«å¤šä¸ªç±»å’Œå‡½æ•°ï¼Œä¸»è¦ç”¨äºæ„å»ºYOLOv8çš„ä¸åŒæ¨¡å‹ï¼ˆå¦‚æ£€æµ‹ã€åˆ†å‰²ã€å§¿æ€ä¼°è®¡å’Œåˆ†ç±»æ¨¡å‹ï¼‰ï¼Œå¹¶æä¾›ç›¸åº”çš„æŸå¤±è®¡ç®—ã€æƒé‡åŠ è½½å’Œæ¨¡å‹ä¿¡æ¯æ‰“å°ç­‰åŠŸèƒ½ã€‚

é¦–å…ˆï¼Œæ–‡ä»¶å¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“å’Œæ¨¡å—ï¼ŒåŒ…æ‹¬PyTorchã€Ultralyticsçš„è‡ªå®šä¹‰æ¨¡å—å’Œå·¥å…·å‡½æ•°ã€‚æ¥ç€ï¼Œå®šä¹‰äº†ä¸€ä¸ªåŸºç±»`BaseModel`ï¼Œå®ƒæ˜¯æ‰€æœ‰YOLOæ¨¡å‹çš„åŸºç¡€ã€‚è¿™ä¸ªç±»å®ç°äº†æ¨¡å‹çš„å‰å‘ä¼ æ’­æ–¹æ³•`forward`ï¼Œå¹¶æ ¹æ®è¾“å…¥ç±»å‹ï¼ˆå›¾åƒæˆ–å­—å…¸ï¼‰é€‰æ‹©ç›¸åº”çš„å¤„ç†æ–¹å¼ã€‚åœ¨`BaseModel`ä¸­ï¼Œè¿˜å®šä¹‰äº†é¢„æµ‹ã€æŸå¤±è®¡ç®—å’Œæƒé‡åŠ è½½ç­‰æ–¹æ³•ã€‚

åœ¨`BaseModel`çš„åŸºç¡€ä¸Šï¼Œæ–‡ä»¶å®šä¹‰äº†å¤šä¸ªå…·ä½“çš„æ¨¡å‹ç±»ï¼ŒåŒ…æ‹¬`DetectionModel`ã€`SegmentationModel`ã€`PoseModel`å’Œ`ClassificationModel`ã€‚æ¯ä¸ªæ¨¡å‹ç±»éƒ½å®ç°äº†ç‰¹å®šçš„åˆå§‹åŒ–å’ŒæŸå¤±è®¡ç®—æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œ`DetectionModel`ç±»ä¸“é—¨ç”¨äºç›®æ ‡æ£€æµ‹ï¼Œåˆå§‹åŒ–æ—¶ä¼šè§£æé…ç½®æ–‡ä»¶å¹¶æ„å»ºæ¨¡å‹ç»“æ„ï¼ŒåŒæ—¶å®šä¹‰äº†æŸå¤±å‡½æ•°ä¸º`v8DetectionLoss`ã€‚

æ­¤å¤–ï¼Œæ–‡ä»¶ä¸­è¿˜å®šä¹‰äº†`Ensemble`ç±»ï¼Œç”¨äºå¤„ç†æ¨¡å‹çš„é›†æˆã€‚é›†æˆæ¨¡å‹å¯ä»¥å°†å¤šä¸ªæ¨¡å‹çš„è¾“å‡ºç»“åˆèµ·æ¥ï¼Œä»¥æé«˜é¢„æµ‹çš„å‡†ç¡®æ€§å’Œé²æ£’æ€§ã€‚

æ–‡ä»¶çš„ååŠéƒ¨åˆ†åŒ…å«äº†ä¸€äº›è¾…åŠ©å‡½æ•°ï¼Œå¦‚`torch_safe_load`ç”¨äºå®‰å…¨åŠ è½½æ¨¡å‹æƒé‡ï¼Œ`attempt_load_weights`å’Œ`attempt_load_one_weight`ç”¨äºåŠ è½½å•ä¸ªæˆ–å¤šä¸ªæ¨¡å‹çš„æƒé‡ï¼Œå¹¶è¿›è¡Œå¿…è¦çš„å…¼å®¹æ€§æ›´æ–°ã€‚è¿˜æœ‰`parse_model`å‡½æ•°ç”¨äºè§£æYOLOæ¨¡å‹çš„é…ç½®å­—å…¸å¹¶æ„å»ºç›¸åº”çš„PyTorchæ¨¡å‹ã€‚

æœ€åï¼Œæ–‡ä»¶è¿˜åŒ…å«äº†ä¸€äº›å·¥å…·å‡½æ•°ï¼Œå¦‚`yaml_model_load`ç”¨äºä»YAMLæ–‡ä»¶åŠ è½½æ¨¡å‹é…ç½®ï¼Œ`guess_model_scale`å’Œ`guess_model_task`ç”¨äºæ¨æµ‹æ¨¡å‹çš„è§„æ¨¡å’Œä»»åŠ¡ç±»å‹ã€‚è¿™äº›å·¥å…·å‡½æ•°ä¸ºæ¨¡å‹çš„ä½¿ç”¨å’Œé…ç½®æä¾›äº†ä¾¿åˆ©ã€‚

æ€»ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯YOLOv8æ¨¡å‹å®ç°çš„æ ¸å¿ƒï¼Œæ¶µç›–äº†æ¨¡å‹çš„æ„å»ºã€è®­ç»ƒã€æ¨ç†å’ŒæŸå¤±è®¡ç®—ç­‰å¤šä¸ªæ–¹é¢ï¼Œä¸ºç”¨æˆ·æä¾›äº†çµæ´»çš„æ¨¡å‹ä½¿ç”¨æ–¹å¼ã€‚

#### 11.4 code\ultralytics\solutions\ai_gym.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼Œä¿ç•™äº†ä¸»è¦åŠŸèƒ½å¹¶æ·»åŠ äº†è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
import cv2
from ultralytics.utils.checks import check_imshow
from ultralytics.utils.plotting import Annotator

class AIGym:
    """ç”¨äºç®¡ç†å®æ—¶è§†é¢‘æµä¸­äººä»¬çš„å¥èº«åŠ¨ä½œè®¡æ•°çš„ç±»ã€‚"""

    def __init__(self):
        """åˆå§‹åŒ– AIGymï¼Œè®¾ç½®é»˜è®¤çš„è§†è§‰å’Œå›¾åƒå‚æ•°ã€‚"""
        self.im0 = None  # å½“å‰å¸§å›¾åƒ
        self.tf = None   # çº¿æ¡åšåº¦
        self.keypoints = None  # å…³é”®ç‚¹æ•°æ®
        self.poseup_angle = None  # ä¸Šå‡å§¿åŠ¿è§’åº¦
        self.posedown_angle = None  # ä¸‹é™å§¿åŠ¿è§’åº¦
        self.threshold = 0.001  # é˜ˆå€¼

        # å­˜å‚¨é˜¶æ®µã€è®¡æ•°å’Œè§’åº¦ä¿¡æ¯
        self.angle = None
        self.count = None
        self.stage = None
        self.pose_type = "pushup"  # é»˜è®¤å§¿åŠ¿ç±»å‹
        self.kpts_to_check = None  # è¦æ£€æŸ¥çš„å…³é”®ç‚¹

        # è§†è§‰ä¿¡æ¯
        self.view_img = False  # æ˜¯å¦æ˜¾ç¤ºå›¾åƒ
        self.annotator = None  # æ³¨é‡Šå™¨å®ä¾‹

        # æ£€æŸ¥ç¯å¢ƒæ˜¯å¦æ”¯æŒ imshow
        self.env_check = check_imshow(warn=True)

    def set_args(self, kpts_to_check, line_thickness=2, view_img=False, pose_up_angle=145.0, pose_down_angle=90.0, pose_type="pullup"):
        """
        é…ç½® AIGym çš„å‚æ•°ã€‚
        Args:
            kpts_to_check (list): ç”¨äºè®¡æ•°çš„ 3 ä¸ªå…³é”®ç‚¹
            line_thickness (int): è¾¹ç•Œæ¡†çš„çº¿æ¡åšåº¦
            view_img (bool): æ˜¯å¦æ˜¾ç¤ºå›¾åƒ
            pose_up_angle (float): ä¸Šå‡å§¿åŠ¿çš„è§’åº¦
            pose_down_angle (float): ä¸‹é™å§¿åŠ¿çš„è§’åº¦
            pose_type: "pushup", "pullup" æˆ– "abworkout"
        """
        self.kpts_to_check = kpts_to_check  # è®¾ç½®è¦æ£€æŸ¥çš„å…³é”®ç‚¹
        self.tf = line_thickness  # è®¾ç½®çº¿æ¡åšåº¦
        self.view_img = view_img  # è®¾ç½®æ˜¯å¦æ˜¾ç¤ºå›¾åƒ
        self.poseup_angle = pose_up_angle  # è®¾ç½®ä¸Šå‡å§¿åŠ¿è§’åº¦
        self.posedown_angle = pose_down_angle  # è®¾ç½®ä¸‹é™å§¿åŠ¿è§’åº¦
        self.pose_type = pose_type  # è®¾ç½®å§¿åŠ¿ç±»å‹

    def start_counting(self, im0, results, frame_count):
        """
        è®¡æ•°å¥èº«åŠ¨ä½œçš„å‡½æ•°ã€‚
        Args:
            im0 (ndarray): å½“å‰è§†é¢‘æµçš„å¸§å›¾åƒã€‚
            results: å§¿åŠ¿ä¼°è®¡æ•°æ®
            frame_count: å½“å‰å¸§è®¡æ•°
        """
        self.im0 = im0  # ä¿å­˜å½“å‰å¸§å›¾åƒ
        if frame_count == 1:
            # åˆå§‹åŒ–è®¡æ•°ã€è§’åº¦å’Œé˜¶æ®µ
            self.count = [0] * len(results[0])
            self.angle = [0] * len(results[0])
            self.stage = ["-" for _ in results[0]]
        
        self.keypoints = results[0].keypoints.data  # è·å–å…³é”®ç‚¹æ•°æ®
        self.annotator = Annotator(im0, line_width=2)  # åˆ›å»ºæ³¨é‡Šå™¨å®ä¾‹

        num_keypoints = len(results[0])  # å…³é”®ç‚¹æ•°é‡

        # å¦‚æœå…³é”®ç‚¹æ•°é‡å‘ç”Ÿå˜åŒ–ï¼Œè°ƒæ•´è§’åº¦ã€è®¡æ•°å’Œé˜¶æ®µçš„é•¿åº¦
        if len(self.angle) != num_keypoints:
            self.angle = [0] * num_keypoints
            self.count = [0] * num_keypoints
            self.stage = ["-" for _ in range(num_keypoints)]

        # éå†æ¯ä¸ªå…³é”®ç‚¹è¿›è¡Œå§¿åŠ¿ä¼°è®¡å’Œè®¡æ•°
        for ind, k in enumerate(reversed(self.keypoints)):
            # è®¡ç®—å§¿åŠ¿è§’åº¦
            self.angle[ind] = self.annotator.estimate_pose_angle(
                k[int(self.kpts_to_check[0])].cpu(),
                k[int(self.kpts_to_check[1])].cpu(),
                k[int(self.kpts_to_check[2])].cpu(),
            )
            self.im0 = self.annotator.draw_specific_points(k, self.kpts_to_check, shape=(640, 640), radius=10)

            # æ ¹æ®å§¿åŠ¿ç±»å‹æ›´æ–°é˜¶æ®µå’Œè®¡æ•°
            if self.pose_type == "pushup":
                if self.angle[ind] > self.poseup_angle:
                    self.stage[ind] = "up"
                if self.angle[ind] < self.posedown_angle and self.stage[ind] == "up":
                    self.stage[ind] = "down"
                    self.count[ind] += 1

            elif self.pose_type == "pullup":
                if self.angle[ind] > self.poseup_angle:
                    self.stage[ind] = "down"
                if self.angle[ind] < self.posedown_angle and self.stage[ind] == "down":
                    self.stage[ind] = "up"
                    self.count[ind] += 1

            # ç»˜åˆ¶è§’åº¦ã€è®¡æ•°å’Œé˜¶æ®µä¿¡æ¯
            self.annotator.plot_angle_and_count_and_stage(
                angle_text=self.angle[ind],
                count_text=self.count[ind],
                stage_text=self.stage[ind],
                center_kpt=k[int(self.kpts_to_check[1])],
                line_thickness=self.tf,
            )

            # ç»˜åˆ¶å…³é”®ç‚¹
            self.annotator.kpts(k, shape=(640, 640), radius=1, kpt_line=True)

        # å¦‚æœç¯å¢ƒæ”¯æŒå¹¶ä¸”éœ€è¦æ˜¾ç¤ºå›¾åƒï¼Œåˆ™å±•ç¤ºå½“å‰å¸§
        if self.env_check and self.view_img:
            cv2.imshow("Ultralytics YOLOv8 AI GYM", self.im0)
            if cv2.waitKey(1) & 0xFF == ord("q"):
                return

        return self.im0  # è¿”å›å¤„ç†åçš„å›¾åƒ

if __name__ == "__main__":
    AIGym()  # å®ä¾‹åŒ– AIGym ç±»
```

### ä»£ç è¯´æ˜ï¼š
1. **ç±» AIGym**ï¼šç®¡ç†å¥èº«åŠ¨ä½œè®¡æ•°çš„æ ¸å¿ƒç±»ï¼Œè´Ÿè´£åˆå§‹åŒ–å‚æ•°ã€è®¾ç½®å…³é”®ç‚¹ã€è®¡æ•°å’Œç»˜åˆ¶å›¾åƒã€‚
2. **åˆå§‹åŒ–æ–¹æ³•**ï¼šè®¾ç½®ä¸€äº›é»˜è®¤å€¼ï¼ŒåŒ…æ‹¬å›¾åƒã€çº¿æ¡åšåº¦ã€å…³é”®ç‚¹ã€å§¿åŠ¿è§’åº¦ç­‰ã€‚
3. **set_args æ–¹æ³•**ï¼šé…ç½® AIGym çš„å‚æ•°ï¼ŒåŒ…æ‹¬è¦æ£€æŸ¥çš„å…³é”®ç‚¹ã€çº¿æ¡åšåº¦ã€æ˜¯å¦æ˜¾ç¤ºå›¾åƒç­‰ã€‚
4. **start_counting æ–¹æ³•**ï¼šå¤„ç†æ¯ä¸€å¸§å›¾åƒï¼Œè®¡ç®—å…³é”®ç‚¹çš„å§¿åŠ¿è§’åº¦ï¼Œæ›´æ–°è®¡æ•°å’Œé˜¶æ®µï¼Œå¹¶ç»˜åˆ¶ç›¸å…³ä¿¡æ¯ã€‚
5. **ç¯å¢ƒæ£€æŸ¥**ï¼šç¡®ä¿åœ¨æ”¯æŒå›¾åƒæ˜¾ç¤ºçš„ç¯å¢ƒä¸­å±•ç¤ºå¤„ç†åçš„å›¾åƒã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªåä¸º `AIGym` çš„ç±»ï¼Œä¸»è¦ç”¨äºåœ¨å®æ—¶è§†é¢‘æµä¸­ç®¡ç†åŸºäºäººä½“å§¿æ€çš„å¥èº«åŠ¨ä½œè®¡æ•°ã€‚ç¨‹åºä½¿ç”¨äº† OpenCV åº“æ¥å¤„ç†å›¾åƒï¼Œå¹¶ç»“åˆäº† Ultralytics æä¾›çš„å·¥å…·è¿›è¡Œå§¿æ€ä¼°è®¡å’Œå¯è§†åŒ–ã€‚

åœ¨ `AIGym` ç±»çš„åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œå®šä¹‰äº†ä¸€äº›é»˜è®¤å‚æ•°ï¼ŒåŒ…æ‹¬å›¾åƒã€å…³é”®ç‚¹ã€è§’åº¦ã€è®¡æ•°ã€é˜¶æ®µç­‰ä¿¡æ¯ã€‚`self.kpts_to_check` ç”¨äºå­˜å‚¨éœ€è¦æ£€æŸ¥çš„å…³é”®ç‚¹ï¼Œ`self.pose_type` ç”¨äºæŒ‡å®šå½“å‰çš„å¥èº«åŠ¨ä½œç±»å‹ï¼ˆå¦‚ä¿¯å§æ’‘ã€å¼•ä½“å‘ä¸Šæˆ–è…¹éƒ¨é”»ç‚¼ï¼‰ã€‚åŒæ—¶ï¼Œç¨‹åºä¼šæ£€æŸ¥å½“å‰ç¯å¢ƒæ˜¯å¦æ”¯æŒå›¾åƒæ˜¾ç¤ºã€‚

`set_args` æ–¹æ³•ç”¨äºé…ç½® `AIGym` çš„å‚æ•°ï¼ŒåŒ…æ‹¬è¦æ£€æŸ¥çš„å…³é”®ç‚¹ã€çº¿æ¡åšåº¦ã€æ˜¯å¦æ˜¾ç¤ºå›¾åƒã€ä¸Šä¸¾å’Œä¸‹æ”¾çš„è§’åº¦ä»¥åŠåŠ¨ä½œç±»å‹ã€‚è¿™ä¸ªæ–¹æ³•å…è®¸ç”¨æˆ·æ ¹æ®éœ€è¦è‡ªå®šä¹‰è¿™äº›å‚æ•°ã€‚

`start_counting` æ–¹æ³•æ˜¯è¯¥ç±»çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œç”¨äºå¤„ç†æ¯ä¸€å¸§å›¾åƒå¹¶è¿›è¡ŒåŠ¨ä½œè®¡æ•°ã€‚è¯¥æ–¹æ³•æ¥æ”¶å½“å‰å¸§å›¾åƒã€å§¿æ€ä¼°è®¡ç»“æœå’Œå¸§è®¡æ•°ä½œä¸ºè¾“å…¥ã€‚å®ƒé¦–å…ˆæ›´æ–°å½“å‰å¸§å›¾åƒï¼Œå¹¶åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶åˆå§‹åŒ–è®¡æ•°ã€è§’åº¦å’Œé˜¶æ®µçš„åˆ—è¡¨ã€‚æ¥ç€ï¼Œç¨‹åºä¼šæ ¹æ®å§¿æ€ä¼°è®¡ç»“æœè®¡ç®—æ¯ä¸ªå…³é”®ç‚¹çš„è§’åº¦ï¼Œå¹¶æ ¹æ®ä¸åŒçš„åŠ¨ä½œç±»å‹ï¼ˆä¿¯å§æ’‘ã€å¼•ä½“å‘ä¸Šæˆ–è…¹éƒ¨é”»ç‚¼ï¼‰æ¥åˆ¤æ–­å½“å‰çš„åŠ¨ä½œé˜¶æ®µï¼ˆä¸Šã€ä¸‹ï¼‰å¹¶è¿›è¡Œè®¡æ•°ã€‚

åœ¨å¤„ç†æ¯ä¸ªå…³é”®ç‚¹æ—¶ï¼Œç¨‹åºä¼šä½¿ç”¨ `Annotator` ç±»æ¥ç»˜åˆ¶å…³é”®ç‚¹ã€è§’åº¦å’Œè®¡æ•°ä¿¡æ¯ã€‚å¯¹äºä¸åŒçš„åŠ¨ä½œç±»å‹ï¼Œç¨‹åºä¼šæ ¹æ®è®¾å®šçš„è§’åº¦é˜ˆå€¼æ¥åˆ¤æ–­åŠ¨ä½œçš„å®Œæˆæƒ…å†µï¼Œå¹¶æ›´æ–°è®¡æ•°å’Œé˜¶æ®µä¿¡æ¯ã€‚æœ€åï¼Œå¦‚æœç¯å¢ƒæ”¯æŒå›¾åƒæ˜¾ç¤ºä¸”ç”¨æˆ·é€‰æ‹©äº†æ˜¾ç¤ºå›¾åƒï¼Œç¨‹åºä¼šä½¿ç”¨ OpenCV æ˜¾ç¤ºå½“å‰å¸§å›¾åƒã€‚

ç¨‹åºçš„æœ€åéƒ¨åˆ†æ˜¯ä¸€ä¸ªç®€å•çš„ä¸»ç¨‹åºï¼Œåˆ›å»ºäº† `AIGym` ç±»çš„å®ä¾‹ã€‚æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªç¨‹åºå®ç°äº†ä¸€ä¸ªåŸºäºå§¿æ€ä¼°è®¡çš„å¥èº«åŠ¨ä½œè®¡æ•°ç³»ç»Ÿï¼Œèƒ½å¤Ÿå®æ—¶å¤„ç†è§†é¢‘æµå¹¶æä¾›åé¦ˆã€‚

#### 11.5 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\trackers\utils\matching.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
import numpy as np
import scipy
from scipy.spatial.distance import cdist
from ultralytics.utils.metrics import bbox_ioa

try:
    import lap  # å¯¼å…¥çº¿æ€§åˆ†é…åº“
    assert lap.__version__  # éªŒè¯åŒ…ä¸æ˜¯ç›®å½•
except (ImportError, AssertionError, AttributeError):
    from ultralytics.utils.checks import check_requirements
    check_requirements('lapx>=0.5.2')  # æ£€æŸ¥å¹¶æ›´æ–°åˆ° lap åŒ…
    import lap

def linear_assignment(cost_matrix, thresh, use_lap=True):
    """
    ä½¿ç”¨ scipy æˆ– lap.lapjv è¿›è¡Œçº¿æ€§åˆ†é…ã€‚

    å‚æ•°:
        cost_matrix (np.ndarray): åŒ…å«åˆ†é…æˆæœ¬å€¼çš„çŸ©é˜µã€‚
        thresh (float): è®¤ä¸ºåˆ†é…æœ‰æ•ˆçš„é˜ˆå€¼ã€‚
        use_lap (bool, optional): æ˜¯å¦ä½¿ç”¨ lap.lapjvã€‚é»˜è®¤ä¸º Trueã€‚

    è¿”å›:
        (tuple): åŒ…å«åŒ¹é…ç´¢å¼•ã€æœªåŒ¹é…çš„ç´¢å¼• a å’ŒæœªåŒ¹é…çš„ç´¢å¼• b çš„å…ƒç»„ã€‚
    """
    if cost_matrix.size == 0:
        # å¦‚æœæˆæœ¬çŸ©é˜µä¸ºç©ºï¼Œè¿”å›ç©ºåŒ¹é…å’Œæ‰€æœ‰æœªåŒ¹é…çš„ç´¢å¼•
        return np.empty((0, 2), dtype=int), tuple(range(cost_matrix.shape[0])), tuple(range(cost_matrix.shape[1]))

    if use_lap:
        # ä½¿ç”¨ lap åº“è¿›è¡Œçº¿æ€§åˆ†é…
        _, x, y = lap.lapjv(cost_matrix, extend_cost=True, cost_limit=thresh)
        matches = [[ix, mx] for ix, mx in enumerate(x) if mx >= 0]  # æ‰¾åˆ°åŒ¹é…çš„ç´¢å¼•
        unmatched_a = np.where(x < 0)[0]  # æ‰¾åˆ°æœªåŒ¹é…çš„ a ç´¢å¼•
        unmatched_b = np.where(y < 0)[0]  # æ‰¾åˆ°æœªåŒ¹é…çš„ b ç´¢å¼•
    else:
        # ä½¿ç”¨ scipy è¿›è¡Œçº¿æ€§åˆ†é…
        x, y = scipy.optimize.linear_sum_assignment(cost_matrix)  # è¡Œ xï¼Œåˆ— y
        matches = np.asarray([[x[i], y[i]] for i in range(len(x)) if cost_matrix[x[i], y[i]] <= thresh])
        if len(matches) == 0:
            unmatched_a = list(np.arange(cost_matrix.shape[0]))
            unmatched_b = list(np.arange(cost_matrix.shape[1]))
        else:
            unmatched_a = list(set(np.arange(cost_matrix.shape[0])) - set(matches[:, 0]))
            unmatched_b = list(set(np.arange(cost_matrix.shape[1])) - set(matches[:, 1]))

    return matches, unmatched_a, unmatched_b  # è¿”å›åŒ¹é…ç»“æœå’ŒæœªåŒ¹é…ç´¢å¼•

def iou_distance(atracks, btracks):
    """
    åŸºäºäº¤å¹¶æ¯” (IoU) è®¡ç®—è½¨è¿¹ä¹‹é—´çš„æˆæœ¬ã€‚

    å‚æ•°:
        atracks (list[STrack] | list[np.ndarray]): è½¨è¿¹ 'a' æˆ–è¾¹ç•Œæ¡†çš„åˆ—è¡¨ã€‚
        btracks (list[STrack] | list[np.ndarray]): è½¨è¿¹ 'b' æˆ–è¾¹ç•Œæ¡†çš„åˆ—è¡¨ã€‚

    è¿”å›:
        (np.ndarray): åŸºäº IoU è®¡ç®—çš„æˆæœ¬çŸ©é˜µã€‚
    """
    # å¦‚æœè¾“å…¥æ˜¯è¾¹ç•Œæ¡†ï¼Œåˆ™ç›´æ¥ä½¿ç”¨
    if (len(atracks) > 0 and isinstance(atracks[0], np.ndarray)) \
            or (len(btracks) > 0 and isinstance(btracks[0], np.ndarray)):
        atlbrs = atracks
        btlbrs = btracks
    else:
        # å¦åˆ™ä»è½¨è¿¹ä¸­æå–è¾¹ç•Œæ¡†
        atlbrs = [track.tlbr for track in atracks]
        btlbrs = [track.tlbr for track in btracks]

    ious = np.zeros((len(atlbrs), len(btlbrs)), dtype=np.float32)  # åˆå§‹åŒ– IoU çŸ©é˜µ
    if len(atlbrs) and len(btlbrs):
        # è®¡ç®— IoU
        ious = bbox_ioa(np.ascontiguousarray(atlbrs, dtype=np.float32),
                        np.ascontiguousarray(btlbrs, dtype=np.float32),
                        iou=True)
    return 1 - ious  # è¿”å›æˆæœ¬çŸ©é˜µï¼ˆ1 - IoUï¼‰

def embedding_distance(tracks, detections, metric='cosine'):
    """
    åŸºäºåµŒå…¥è®¡ç®—è½¨è¿¹å’Œæ£€æµ‹ä¹‹é—´çš„è·ç¦»ã€‚

    å‚æ•°:
        tracks (list[STrack]): è½¨è¿¹åˆ—è¡¨ã€‚
        detections (list[BaseTrack]): æ£€æµ‹åˆ—è¡¨ã€‚
        metric (str, optional): è·ç¦»è®¡ç®—çš„åº¦é‡ã€‚é»˜è®¤ä¸º 'cosine'ã€‚

    è¿”å›:
        (np.ndarray): åŸºäºåµŒå…¥è®¡ç®—çš„æˆæœ¬çŸ©é˜µã€‚
    """
    cost_matrix = np.zeros((len(tracks), len(detections)), dtype=np.float32)  # åˆå§‹åŒ–æˆæœ¬çŸ©é˜µ
    if cost_matrix.size == 0:
        return cost_matrix
    det_features = np.asarray([track.curr_feat for track in detections], dtype=np.float32)  # æå–æ£€æµ‹ç‰¹å¾
    track_features = np.asarray([track.smooth_feat for track in tracks], dtype=np.float32)  # æå–è½¨è¿¹ç‰¹å¾
    cost_matrix = np.maximum(0.0, cdist(track_features, det_features, metric))  # è®¡ç®—ç‰¹å¾ä¹‹é—´çš„è·ç¦»
    return cost_matrix  # è¿”å›æˆæœ¬çŸ©é˜µ

def fuse_score(cost_matrix, detections):
    """
    å°†æˆæœ¬çŸ©é˜µä¸æ£€æµ‹åˆ†æ•°èåˆä»¥ç”Ÿæˆå•ä¸€ç›¸ä¼¼åº¦çŸ©é˜µã€‚

    å‚æ•°:
        cost_matrix (np.ndarray): åŒ…å«åˆ†é…æˆæœ¬å€¼çš„çŸ©é˜µã€‚
        detections (list[BaseTrack]): å¸¦æœ‰åˆ†æ•°çš„æ£€æµ‹åˆ—è¡¨ã€‚

    è¿”å›:
        (np.ndarray): èåˆåçš„ç›¸ä¼¼åº¦çŸ©é˜µã€‚
    """
    if cost_matrix.size == 0:
        return cost_matrix
    iou_sim = 1 - cost_matrix  # è®¡ç®— IoU ç›¸ä¼¼åº¦
    det_scores = np.array([det.score for det in detections])  # æå–æ£€æµ‹åˆ†æ•°
    det_scores = np.expand_dims(det_scores, axis=0).repeat(cost_matrix.shape[0], axis=0)  # æ‰©å±•åˆ†æ•°ç»´åº¦
    fuse_sim = iou_sim * det_scores  # èåˆç›¸ä¼¼åº¦
    return 1 - fuse_sim  # è¿”å›èåˆåçš„æˆæœ¬çŸ©é˜µ
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è¯´æ˜ï¼š
1. **çº¿æ€§åˆ†é…**ï¼š`linear_assignment` å‡½æ•°å®ç°äº†çº¿æ€§åˆ†é…ç®—æ³•ï¼Œèƒ½å¤Ÿæ ¹æ®æˆæœ¬çŸ©é˜µæ‰¾åˆ°æœ€ä½³åŒ¹é…ï¼Œè¿”å›åŒ¹é…ç»“æœå’ŒæœªåŒ¹é…çš„ç´¢å¼•ã€‚
2. **IoU è·ç¦»è®¡ç®—**ï¼š`iou_distance` å‡½æ•°è®¡ç®—ä¸¤ä¸ªè½¨è¿¹ä¹‹é—´çš„äº¤å¹¶æ¯” (IoU)ï¼Œå¹¶è¿”å›æˆæœ¬çŸ©é˜µã€‚
3. **åµŒå…¥è·ç¦»è®¡ç®—**ï¼š`embedding_distance` å‡½æ•°è®¡ç®—è½¨è¿¹å’Œæ£€æµ‹ä¹‹é—´çš„è·ç¦»ï¼ŒåŸºäºç‰¹å¾å‘é‡çš„ç›¸ä¼¼æ€§ã€‚
4. **èåˆåˆ†æ•°**ï¼š`fuse_score` å‡½æ•°å°†æˆæœ¬çŸ©é˜µä¸æ£€æµ‹åˆ†æ•°ç»“åˆï¼Œç”Ÿæˆä¸€ä¸ªç›¸ä¼¼åº¦çŸ©é˜µï¼Œä¾¿äºåç»­å¤„ç†ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºç›®æ ‡è·Ÿè¸ªçš„å·¥å…·ï¼Œä¸»è¦å®ç°äº†çº¿æ€§åˆ†é…ã€IoUï¼ˆäº¤å¹¶æ¯”ï¼‰è·ç¦»ã€åµŒå…¥è·ç¦»å’Œèåˆè¯„åˆ†ç­‰åŠŸèƒ½ï¼Œé€‚ç”¨äºYOLOv8ç®—æ³•çš„æ”¹è¿›å’Œè°ƒè¯•ã€‚

é¦–å…ˆï¼Œæ–‡ä»¶å¯¼å…¥äº†å¿…è¦çš„åº“ï¼ŒåŒ…æ‹¬NumPyå’ŒSciPyï¼Œä»¥åŠç”¨äºè®¡ç®—IoAï¼ˆäº¤é›†ä¸é¢ç§¯æ¯”ï¼‰çš„è‡ªå®šä¹‰å‡½æ•°ã€‚ä¸ºäº†è¿›è¡Œçº¿æ€§åˆ†é…ï¼Œæ–‡ä»¶å°è¯•å¯¼å…¥`lap`åº“ï¼Œå¦‚æœå¯¼å…¥å¤±è´¥ï¼Œåˆ™ä¼šæ£€æŸ¥å¹¶å®‰è£…æ‰€éœ€çš„ä¾èµ–é¡¹ã€‚

`linear_assignment`å‡½æ•°æ˜¯è¯¥æ–‡ä»¶çš„æ ¸å¿ƒä¹‹ä¸€ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæˆæœ¬çŸ©é˜µå’Œä¸€ä¸ªé˜ˆå€¼ï¼Œè¿”å›åŒ¹é…çš„ç´¢å¼•ä»¥åŠæœªåŒ¹é…çš„ç´¢å¼•ã€‚è¯¥å‡½æ•°æ”¯æŒä½¿ç”¨`lap`åº“æˆ–SciPyçš„çº¿æ€§æ±‚è§£æ–¹æ³•æ¥è¿›è¡ŒåŒ¹é…ã€‚å¦‚æœæˆæœ¬çŸ©é˜µä¸ºç©ºï¼Œåˆ™è¿”å›ç©ºçš„åŒ¹é…ç»“æœå’Œæ‰€æœ‰æœªåŒ¹é…çš„ç´¢å¼•ã€‚è‹¥ä½¿ç”¨`lap`åº“ï¼Œåˆ™è°ƒç”¨`lapjv`å‡½æ•°è¿›è¡Œæ±‚è§£ï¼›å¦åˆ™ï¼Œä½¿ç”¨SciPyçš„`linear_sum_assignment`æ–¹æ³•ã€‚æœ€ç»ˆï¼Œå‡½æ•°è¿”å›åŒ¹é…ç»“æœå’ŒæœªåŒ¹é…çš„ç´¢å¼•ã€‚

`iou_distance`å‡½æ•°è®¡ç®—åŸºäºIoUçš„æˆæœ¬çŸ©é˜µï¼Œè¾“å…¥ä¸ºä¸¤ä¸ªè½¨è¿¹æˆ–è¾¹ç•Œæ¡†çš„åˆ—è¡¨ã€‚è¯¥å‡½æ•°é¦–å…ˆåˆ¤æ–­è¾“å…¥ç±»å‹ï¼Œç„¶åæå–è¾¹ç•Œæ¡†ä¿¡æ¯ã€‚æ¥ç€ï¼Œä½¿ç”¨`bbox_ioa`å‡½æ•°è®¡ç®—IoUï¼Œå¹¶è¿”å›1å‡å»IoUçš„å€¼ä½œä¸ºæˆæœ¬çŸ©é˜µã€‚

`embedding_distance`å‡½æ•°è®¡ç®—è½¨è¿¹å’Œæ£€æµ‹ä¹‹é—´çš„åµŒå…¥è·ç¦»ï¼Œä½¿ç”¨ä½™å¼¦è·ç¦»ä½œä¸ºé»˜è®¤åº¦é‡ã€‚å®ƒæ„å»ºä¸€ä¸ªæˆæœ¬çŸ©é˜µï¼Œè®¡ç®—æ¯ä¸ªè½¨è¿¹ä¸æ£€æµ‹ä¹‹é—´çš„è·ç¦»ï¼Œå¹¶è¿”å›è¯¥çŸ©é˜µã€‚

æœ€åï¼Œ`fuse_score`å‡½æ•°å°†æˆæœ¬çŸ©é˜µä¸æ£€æµ‹åˆ†æ•°èåˆï¼Œç”Ÿæˆä¸€ä¸ªç›¸ä¼¼åº¦çŸ©é˜µã€‚å®ƒé¦–å…ˆè®¡ç®—IoUç›¸ä¼¼åº¦ï¼Œç„¶åå°†æ£€æµ‹åˆ†æ•°æ‰©å±•åˆ°ä¸æˆæœ¬çŸ©é˜µç›¸åŒçš„å½¢çŠ¶ï¼Œæœ€åé€šè¿‡ç›¸ä¹˜å¾—åˆ°èåˆåçš„ç›¸ä¼¼åº¦çŸ©é˜µï¼Œå¹¶è¿”å›1å‡å»èåˆåçš„ç»“æœä½œä¸ºæœ€ç»ˆçš„æˆæœ¬ã€‚

æ•´ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ºYOLOv8çš„ç›®æ ‡è·Ÿè¸ªæä¾›äº†å¤šç§å·¥å…·ï¼Œå¸®åŠ©å®ç°é«˜æ•ˆçš„ç›®æ ‡åŒ¹é…å’Œè·Ÿè¸ªã€‚

#### 11.6 train.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
class DetectionTrainer(BaseTrainer):
    """
    DetectionTrainerç±»ï¼Œç»§æ‰¿è‡ªBaseTrainerç±»ï¼Œç”¨äºåŸºäºæ£€æµ‹æ¨¡å‹çš„è®­ç»ƒã€‚
    """

    def build_dataset(self, img_path, mode="train", batch=None):
        """
        æ„å»ºYOLOæ•°æ®é›†ã€‚

        å‚æ•°:
            img_path (str): åŒ…å«å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
            mode (str): æ¨¡å¼ï¼Œå¯ä»¥æ˜¯'train'æˆ–'val'ï¼Œç”¨æˆ·å¯ä»¥ä¸ºæ¯ç§æ¨¡å¼è‡ªå®šä¹‰ä¸åŒçš„å¢å¼ºã€‚
            batch (int, optional): æ‰¹æ¬¡å¤§å°ï¼Œä»…ç”¨äº'rect'æ¨¡å¼ã€‚é»˜è®¤ä¸ºNoneã€‚
        """
        gs = max(int(de_parallel(self.model).stride.max() if self.model else 0), 32)
        return build_yolo_dataset(self.args, img_path, batch, self.data, mode=mode, rect=mode == "val", stride=gs)

    def get_dataloader(self, dataset_path, batch_size=16, rank=0, mode="train"):
        """æ„é€ å¹¶è¿”å›æ•°æ®åŠ è½½å™¨ã€‚"""
        assert mode in ["train", "val"]  # ç¡®ä¿æ¨¡å¼æ˜¯'train'æˆ–'val'
        with torch_distributed_zero_first(rank):  # åœ¨åˆ†å¸ƒå¼è®­ç»ƒä¸­ï¼Œç¡®ä¿æ•°æ®é›†åªåˆå§‹åŒ–ä¸€æ¬¡
            dataset = self.build_dataset(dataset_path, mode, batch_size)  # æ„å»ºæ•°æ®é›†
        shuffle = mode == "train"  # è®­ç»ƒæ¨¡å¼ä¸‹æ‰“ä¹±æ•°æ®
        if getattr(dataset, "rect", False) and shuffle:
            LOGGER.warning("WARNING âš ï¸ 'rect=True'ä¸DataLoaderçš„shuffleä¸å…¼å®¹ï¼Œè®¾ç½®shuffle=False")
            shuffle = False
        workers = self.args.workers if mode == "train" else self.args.workers * 2  # è®¾ç½®å·¥ä½œçº¿ç¨‹æ•°
        return build_dataloader(dataset, batch_size, workers, shuffle, rank)  # è¿”å›æ•°æ®åŠ è½½å™¨

    def preprocess_batch(self, batch):
        """å¯¹ä¸€æ‰¹å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾å’Œè½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚"""
        batch["img"] = batch["img"].to(self.device, non_blocking=True).float() / 255  # å°†å›¾åƒè½¬æ¢ä¸ºæµ®ç‚¹æ•°å¹¶å½’ä¸€åŒ–
        if self.args.multi_scale:  # å¦‚æœå¯ç”¨å¤šå°ºåº¦è®­ç»ƒ
            imgs = batch["img"]
            sz = (
                random.randrange(self.args.imgsz * 0.5, self.args.imgsz * 1.5 + self.stride)
                // self.stride
                * self.stride
            )  # éšæœºé€‰æ‹©ä¸€ä¸ªæ–°çš„å°ºå¯¸
            sf = sz / max(imgs.shape[2:])  # è®¡ç®—ç¼©æ”¾å› å­
            if sf != 1:  # å¦‚æœç¼©æ”¾å› å­ä¸ä¸º1
                ns = [
                    math.ceil(x * sf / self.stride) * self.stride for x in imgs.shape[2:]
                ]  # è®¡ç®—æ–°çš„å½¢çŠ¶
                imgs = nn.functional.interpolate(imgs, size=ns, mode="bilinear", align_corners=False)  # è¿›è¡Œæ’å€¼
            batch["img"] = imgs  # æ›´æ–°æ‰¹æ¬¡ä¸­çš„å›¾åƒ
        return batch

    def set_model_attributes(self):
        """è®¾ç½®æ¨¡å‹çš„å±æ€§ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡å’Œåç§°ã€‚"""
        self.model.nc = self.data["nc"]  # å°†ç±»åˆ«æ•°é‡é™„åŠ åˆ°æ¨¡å‹
        self.model.names = self.data["names"]  # å°†ç±»åˆ«åç§°é™„åŠ åˆ°æ¨¡å‹
        self.model.args = self.args  # å°†è¶…å‚æ•°é™„åŠ åˆ°æ¨¡å‹

    def get_model(self, cfg=None, weights=None, verbose=True):
        """è¿”å›ä¸€ä¸ªYOLOæ£€æµ‹æ¨¡å‹ã€‚"""
        model = DetectionModel(cfg, nc=self.data["nc"], verbose=verbose and RANK == -1)  # åˆ›å»ºæ£€æµ‹æ¨¡å‹
        if weights:
            model.load(weights)  # åŠ è½½æƒé‡
        return model

    def get_validator(self):
        """è¿”å›ç”¨äºYOLOæ¨¡å‹éªŒè¯çš„DetectionValidatorã€‚"""
        self.loss_names = "box_loss", "cls_loss", "dfl_loss"  # å®šä¹‰æŸå¤±åç§°
        return yolo.detect.DetectionValidator(
            self.test_loader, save_dir=self.save_dir, args=copy(self.args), _callbacks=self.callbacks
        )

    def label_loss_items(self, loss_items=None, prefix="train"):
        """
        è¿”å›å¸¦æœ‰æ ‡ç­¾çš„è®­ç»ƒæŸå¤±é¡¹å­—å…¸ã€‚

        å¯¹äºåˆ†ç±»ä¸éœ€è¦ï¼Œä½†å¯¹äºåˆ†å‰²å’Œæ£€æµ‹æ˜¯å¿…è¦çš„ã€‚
        """
        keys = [f"{prefix}/{x}" for x in self.loss_names]  # åˆ›å»ºæŸå¤±é¡¹çš„é”®
        if loss_items is not None:
            loss_items = [round(float(x), 5) for x in loss_items]  # å°†å¼ é‡è½¬æ¢ä¸ºä¿ç•™5ä½å°æ•°çš„æµ®ç‚¹æ•°
            return dict(zip(keys, loss_items))  # è¿”å›æŸå¤±é¡¹å­—å…¸
        else:
            return keys

    def progress_string(self):
        """è¿”å›æ ¼å¼åŒ–çš„è®­ç»ƒè¿›åº¦å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬è½®æ¬¡ã€GPUå†…å­˜ã€æŸå¤±ã€å®ä¾‹å’Œå¤§å°ã€‚"""
        return ("\n" + "%11s" * (4 + len(self.loss_names))) % (
            "Epoch",
            "GPU_mem",
            *self.loss_names,
            "Instances",
            "Size",
        )

    def plot_training_samples(self, batch, ni):
        """ç»˜åˆ¶å¸¦æœ‰æ³¨é‡Šçš„è®­ç»ƒæ ·æœ¬ã€‚"""
        plot_images(
            images=batch["img"],
            batch_idx=batch["batch_idx"],
            cls=batch["cls"].squeeze(-1),
            bboxes=batch["bboxes"],
            paths=batch["im_file"],
            fname=self.save_dir / f"train_batch{ni}.jpg",
            on_plot=self.on_plot,
        )

    def plot_metrics(self):
        """ä»CSVæ–‡ä»¶ä¸­ç»˜åˆ¶æŒ‡æ ‡ã€‚"""
        plot_results(file=self.csv, on_plot=self.on_plot)  # ä¿å­˜ç»“æœå›¾åƒ

    def plot_training_labels(self):
        """åˆ›å»ºYOLOæ¨¡å‹çš„æ ‡è®°è®­ç»ƒå›¾ã€‚"""
        boxes = np.concatenate([lb["bboxes"] for lb in self.train_loader.dataset.labels], 0)  # åˆå¹¶æ‰€æœ‰è¾¹ç•Œæ¡†
        cls = np.concatenate([lb["cls"] for lb in self.train_loader.dataset.labels], 0)  # åˆå¹¶æ‰€æœ‰ç±»åˆ«
        plot_labels(boxes, cls.squeeze(), names=self.data["names"], save_dir=self.save_dir, on_plot=self.on_plot)  # ç»˜åˆ¶æ ‡ç­¾
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è¯´æ˜ï¼š
1. **DetectionTrainerç±»**ï¼šè¯¥ç±»ç”¨äºè®­ç»ƒYOLOæ£€æµ‹æ¨¡å‹ï¼Œç»§æ‰¿è‡ªåŸºç¡€è®­ç»ƒç±»`BaseTrainer`ã€‚
2. **æ•°æ®é›†æ„å»º**ï¼š`build_dataset`æ–¹æ³•ç”¨äºæ ¹æ®ç»™å®šçš„å›¾åƒè·¯å¾„å’Œæ¨¡å¼æ„å»ºYOLOæ•°æ®é›†ã€‚
3. **æ•°æ®åŠ è½½å™¨**ï¼š`get_dataloader`æ–¹æ³•æ„é€ å¹¶è¿”å›æ•°æ®åŠ è½½å™¨ï¼Œæ”¯æŒè®­ç»ƒå’ŒéªŒè¯æ¨¡å¼ã€‚
4. **æ‰¹å¤„ç†é¢„å¤„ç†**ï¼š`preprocess_batch`æ–¹æ³•å¯¹è¾“å…¥æ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å›¾åƒç¼©æ”¾å’Œå½’ä¸€åŒ–ã€‚
5. **æ¨¡å‹å±æ€§è®¾ç½®**ï¼š`set_model_attributes`æ–¹æ³•è®¾ç½®æ¨¡å‹çš„ç±»åˆ«æ•°é‡å’Œåç§°ã€‚
6. **æ¨¡å‹è·å–**ï¼š`get_model`æ–¹æ³•è¿”å›ä¸€ä¸ªYOLOæ£€æµ‹æ¨¡å‹ï¼Œå¹¶å¯é€‰æ‹©åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚
7. **éªŒè¯å™¨è·å–**ï¼š`get_validator`æ–¹æ³•è¿”å›ç”¨äºæ¨¡å‹éªŒè¯çš„éªŒè¯å™¨ã€‚
8. **æŸå¤±é¡¹æ ‡ç­¾**ï¼š`label_loss_items`æ–¹æ³•è¿”å›å¸¦æœ‰æ ‡ç­¾çš„æŸå¤±é¡¹å­—å…¸ã€‚
9. **è¿›åº¦å­—ç¬¦ä¸²**ï¼š`progress_string`æ–¹æ³•è¿”å›è®­ç»ƒè¿›åº¦çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚
10. **ç»˜å›¾åŠŸèƒ½**ï¼šåŒ…æ‹¬ç»˜åˆ¶è®­ç»ƒæ ·æœ¬ã€ç»˜åˆ¶æŒ‡æ ‡å’Œç»˜åˆ¶è®­ç»ƒæ ‡ç­¾çš„åŠŸèƒ½ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `train.py` æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒç›®æ ‡æ£€æµ‹æ¨¡å‹çš„ä»£ç ï¼Œä¸»è¦åŸºäº YOLOï¼ˆYou Only Look Onceï¼‰ç®—æ³•ã€‚å®ƒç»§æ‰¿è‡ª `BaseTrainer` ç±»ï¼Œæä¾›äº†ä¸€ç³»åˆ—ç”¨äºæ„å»ºæ•°æ®é›†ã€æ•°æ®åŠ è½½ã€æ¨¡å‹è®¾ç½®å’Œè®­ç»ƒè¿‡ç¨‹çš„åŠŸèƒ½ã€‚

é¦–å…ˆï¼Œç¨‹åºå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“å’Œæ¨¡å—ï¼ŒåŒ…æ‹¬æ•°å­¦è¿ç®—ã€éšæœºæ•°ç”Ÿæˆã€æ·±åº¦å­¦ä¹ æ¡†æ¶ PyTorch ç›¸å…³çš„æ¨¡å—ï¼Œä»¥åŠ Ultralytics æä¾›çš„å·¥å…·å’Œæ¨¡å‹ã€‚è¿™äº›æ¨¡å—ä¸ºåç»­çš„è®­ç»ƒè¿‡ç¨‹æä¾›äº†åŸºç¡€ã€‚

`DetectionTrainer` ç±»æ˜¯è¯¥æ–‡ä»¶çš„æ ¸å¿ƒï¼Œè´Ÿè´£è®­ç»ƒç›®æ ‡æ£€æµ‹æ¨¡å‹ã€‚å®ƒçš„æ„é€ å‡½æ•°æ¥æ”¶ä¸€äº›å‚æ•°ï¼Œæ¯”å¦‚æ¨¡å‹é…ç½®ã€æ•°æ®é›†è·¯å¾„å’Œè®­ç»ƒå‘¨æœŸç­‰ã€‚é€šè¿‡è¿™äº›å‚æ•°ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰è®­ç»ƒè¿‡ç¨‹ã€‚

åœ¨ `build_dataset` æ–¹æ³•ä¸­ï¼Œç¨‹åºæ ¹æ®ä¼ å…¥çš„å›¾åƒè·¯å¾„å’Œæ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰æ„å»º YOLO æ•°æ®é›†ã€‚å®ƒä¼šæ ¹æ®æ¨¡å‹çš„æ­¥å¹…ï¼ˆstrideï¼‰æ¥è°ƒæ•´æ•°æ®é›†çš„æ„å»ºæ–¹å¼ï¼Œä»¥ç¡®ä¿è¾“å…¥å›¾åƒçš„å°ºå¯¸ç¬¦åˆæ¨¡å‹è¦æ±‚ã€‚

`get_dataloader` æ–¹æ³•åˆ™è´Ÿè´£åˆ›å»ºæ•°æ®åŠ è½½å™¨ï¼Œæ”¯æŒåˆ†å¸ƒå¼è®­ç»ƒã€‚å®ƒä¼šæ ¹æ®æ¨¡å¼å†³å®šæ˜¯å¦æ‰“ä¹±æ•°æ®ï¼Œå¹¶è®¾ç½®å·¥ä½œçº¿ç¨‹çš„æ•°é‡ã€‚æ•°æ®åŠ è½½å™¨çš„ä½œç”¨æ˜¯å°†æ•°æ®é›†åˆ†æ‰¹æ¬¡åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œä»¥ä¾¿äºæ¨¡å‹è®­ç»ƒã€‚

`preprocess_batch` æ–¹æ³•ç”¨äºå¯¹æ¯ä¸ªæ‰¹æ¬¡çš„å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾å’Œè½¬æ¢ä¸ºæµ®ç‚¹æ•°æ ¼å¼ã€‚ç‰¹åˆ«æ˜¯åœ¨å¤šå°ºåº¦è®­ç»ƒæ—¶ï¼Œç¨‹åºä¼šéšæœºé€‰æ‹©å›¾åƒçš„å°ºå¯¸ï¼Œå¹¶å¯¹å›¾åƒè¿›è¡Œæ’å€¼å¤„ç†ï¼Œä»¥é€‚åº”æ¨¡å‹çš„è¾“å…¥è¦æ±‚ã€‚

`set_model_attributes` æ–¹æ³•ç”¨äºè®¾ç½®æ¨¡å‹çš„å±æ€§ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡å’Œç±»åˆ«åç§°ã€‚è¿™äº›ä¿¡æ¯æ˜¯è®­ç»ƒè¿‡ç¨‹ä¸­å¿…éœ€çš„ï¼Œä»¥ä¾¿æ¨¡å‹èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«å’Œåˆ†ç±»ç›®æ ‡ã€‚

`get_model` æ–¹æ³•è¿”å›ä¸€ä¸ª YOLO æ£€æµ‹æ¨¡å‹å®ä¾‹ï¼Œå¹¶å¯ä»¥åŠ è½½é¢„è®­ç»ƒæƒé‡ï¼Œä»¥ä¾¿äºåœ¨å·²æœ‰æ¨¡å‹çš„åŸºç¡€ä¸Šè¿›è¡Œå¾®è°ƒã€‚

`get_validator` æ–¹æ³•è¿”å›ä¸€ä¸ªç”¨äºæ¨¡å‹éªŒè¯çš„å®ä¾‹ï¼Œä¸»è¦ç”¨äºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è¯„ä¼°æ¨¡å‹çš„æ€§èƒ½ã€‚

`label_loss_items` æ–¹æ³•ç”¨äºç”Ÿæˆè®­ç»ƒæŸå¤±çš„å­—å…¸ï¼Œä¾¿äºç›‘æ§è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŸå¤±å˜åŒ–ã€‚

`progress_string` æ–¹æ³•è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼Œæ˜¾ç¤ºè®­ç»ƒè¿›åº¦ï¼ŒåŒ…æ‹¬å½“å‰çš„è½®æ¬¡ã€GPU å†…å­˜ä½¿ç”¨æƒ…å†µã€æŸå¤±å€¼ç­‰ä¿¡æ¯ã€‚

`plot_training_samples` æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒæ ·æœ¬åŠå…¶æ ‡æ³¨ï¼Œå¸®åŠ©å¯è§†åŒ–è®­ç»ƒæ•°æ®çš„è´¨é‡ã€‚

æœ€åï¼Œ`plot_metrics` å’Œ `plot_training_labels` æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡å’Œæ ‡ç­¾ï¼Œä¾¿äºåˆ†ææ¨¡å‹çš„è®­ç»ƒæ•ˆæœå’Œæ•°æ®é›†çš„æ ‡æ³¨æƒ…å†µã€‚

æ•´ä½“è€Œè¨€ï¼Œè¿™ä¸ªç¨‹åºæ–‡ä»¶æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„æ¡†æ¶ï¼Œç”¨äºè®­ç»ƒ YOLO ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œæ¶µç›–äº†æ•°æ®å¤„ç†ã€æ¨¡å‹è®¾ç½®ã€è®­ç»ƒç›‘æ§å’Œç»“æœå¯è§†åŒ–ç­‰å¤šä¸ªæ–¹é¢ã€‚

### 12.ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆèŠ‚é€‰ï¼‰

### æ•´ä½“åŠŸèƒ½å’Œæ„æ¶æ¦‚æ‹¬

è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºYOLOv8ç®—æ³•çš„ç›®æ ‡æ£€æµ‹å’Œè·Ÿè¸ªç³»ç»Ÿï¼ŒåŒ…å«å¤šä¸ªæ¨¡å—å’Œå·¥å…·ï¼Œæ—¨åœ¨æä¾›é«˜æ•ˆçš„æ¨¡å‹è®­ç»ƒã€æ¨ç†å’Œå¯è§†åŒ–åŠŸèƒ½ã€‚æ•´ä½“æ¶æ„åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªä¸»è¦éƒ¨åˆ†ï¼š

1. **æ¨¡å‹å®šä¹‰ä¸è®­ç»ƒ**ï¼šåŒ…å«YOLOv8æ¨¡å‹çš„å®ç°ã€è®­ç»ƒè¿‡ç¨‹çš„ç®¡ç†å’ŒæŸå¤±è®¡ç®—ç­‰åŠŸèƒ½ï¼Œæ”¯æŒå¤šç§ç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚
2. **æ•°æ®å¤„ç†**ï¼šè´Ÿè´£æ•°æ®é›†çš„æ„å»ºã€åŠ è½½å’Œé¢„å¤„ç†ï¼Œç¡®ä¿è¾“å…¥æ•°æ®ç¬¦åˆæ¨¡å‹è¦æ±‚ã€‚
3. **ç›®æ ‡è·Ÿè¸ª**ï¼šå®ç°äº†ç›®æ ‡è·Ÿè¸ªçš„ç›¸å…³ç®—æ³•ï¼Œæ”¯æŒåœ¨è§†é¢‘æµä¸­å®æ—¶è·Ÿè¸ªç›®æ ‡ã€‚
4. **å¯è§†åŒ–ä¸åé¦ˆ**ï¼šæä¾›å¯è§†åŒ–å·¥å…·ï¼Œå¸®åŠ©ç”¨æˆ·ç›‘æ§è®­ç»ƒè¿‡ç¨‹ã€è¯„ä¼°æ¨¡å‹æ€§èƒ½å’Œå¯è§†åŒ–å…³é”®ç‚¹ã€‚
5. **ç”¨æˆ·ç•Œé¢**ï¼šæä¾›ç”¨æˆ·äº¤äº’ç•Œé¢ï¼Œç®€åŒ–æ¨¡å‹çš„ä½¿ç”¨å’Œæ“ä½œã€‚

ä»¥ä¸‹æ˜¯æ¯ä¸ªæ–‡ä»¶çš„åŠŸèƒ½æ•´ç†è¡¨æ ¼ï¼š

| æ–‡ä»¶è·¯å¾„                                                                                          | åŠŸèƒ½æè¿°                                                         |
|---------------------------------------------------------------------------------------------------|------------------------------------------------------------------|
| `ultralytics/models/nas/__init__.py`                                                             | åˆå§‹åŒ–ç¥ç»æ¶æ„æœç´¢ï¼ˆNASï¼‰æ¨¡å—ï¼Œå¯¼å…¥ç›¸å…³ç»„ä»¶ã€‚                   |
| `ui.py`                                                                                           | æä¾›ç”¨æˆ·ç•Œé¢ï¼Œç®€åŒ–é€šè¿‡Pythonç¯å¢ƒè¿è¡ŒStreamlitåº”ç”¨çš„è¿‡ç¨‹ã€‚       |
| `ultralytics/nn/tasks.py`                                                                         | å®šä¹‰YOLOv8æ¨¡å‹åŠå…¶è®­ç»ƒã€æ¨ç†å’ŒæŸå¤±è®¡ç®—åŠŸèƒ½ã€‚                     |
| `ultralytics/solutions/ai_gym.py`                                                                | å®ç°åŸºäºå§¿æ€ä¼°è®¡çš„å¥èº«åŠ¨ä½œè®¡æ•°ç³»ç»Ÿï¼Œå¤„ç†å®æ—¶è§†é¢‘æµã€‚             |
| `ultralytics/trackers/utils/matching.py`                                                         | æä¾›ç›®æ ‡è·Ÿè¸ªçš„å·¥å…·ï¼ŒåŒ…æ‹¬çº¿æ€§åˆ†é…ã€IoUè·ç¦»å’ŒåµŒå…¥è·ç¦»è®¡ç®—ã€‚       |
| `train.py`                                                                                        | ç®¡ç†YOLOv8æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®é›†æ„å»ºã€æ¨¡å‹è®¾ç½®å’Œè®­ç»ƒç›‘æ§ã€‚  |
| `ultralytics/models/sam/model.py`                                                                 | å®šä¹‰SAMï¼ˆSegment Anything Modelï¼‰æ¨¡å‹åŠå…¶ç›¸å…³åŠŸèƒ½ã€‚              |
| `ultralytics/utils/callbacks/hub.py`                                                             | æä¾›æ¨¡å‹çš„å›è°ƒå‡½æ•°ï¼Œæ”¯æŒè®­ç»ƒè¿‡ç¨‹ä¸­çš„æ¨¡å‹ä¿å­˜å’Œè¯„ä¼°ã€‚             |
| `log.py`                                                                                          | å¤„ç†æ—¥å¿—è®°å½•å’Œè¾“å‡ºï¼Œç›‘æ§è®­ç»ƒè¿‡ç¨‹ä¸­çš„ä¿¡æ¯ã€‚                       |
| `ultralytics/utils/callbacks/raytune.py`                                                         | æä¾›ä¸Ray Tuneé›†æˆçš„å›è°ƒå‡½æ•°ï¼Œç”¨äºè¶…å‚æ•°è°ƒä¼˜ã€‚                   |
| `ultralytics/nn/extra_modules/orepa.py`                                                          | å®ç°é¢å¤–çš„æ¨¡å—æˆ–åŠŸèƒ½ï¼Œå¯èƒ½ä¸æ¨¡å‹çš„å¢å¼ºæˆ–æ”¹è¿›ç›¸å…³ã€‚               |
| `ultralytics/models/sam/build.py`                                                                 | æ„å»ºSAMæ¨¡å‹çš„ç›¸å…³åŠŸèƒ½ï¼Œæ”¯æŒæ¨¡å‹çš„åˆå§‹åŒ–å’Œé…ç½®ã€‚                  |

è¯¥è¡¨æ ¼æ¦‚è¿°äº†é¡¹ç›®ä¸­å„ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½ï¼Œå¸®åŠ©ç†è§£æ•´ä½“æ¶æ„å’Œæ¨¡å—ä¹‹é—´çš„å…³ç³»ã€‚

æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰â€ä¸­éƒ¨åˆ†ä»£ç å¯èƒ½ä¼šä¼˜åŒ–å‡çº§ï¼Œä»…ä¾›å‚è€ƒå­¦ä¹ ï¼Œå®Œæ•´â€œè®­ç»ƒæºç â€ã€â€œWebå‰ç«¯ç•Œé¢â€å’Œâ€œ70+ç§åˆ›æ–°ç‚¹æºç â€ä»¥â€œ13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–â€çš„å†…å®¹ä¸ºå‡†ã€‚

### 13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–

![19.png](19.png)


# [ä¸‹è½½é“¾æ¥ï¼šhttps://mbd.pub/o/bread/ZpuWlZ1p](https://mbd.pub/o/bread/ZpuWlZ1p)